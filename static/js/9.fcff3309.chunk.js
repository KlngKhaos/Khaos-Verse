/*! For license information please see 9.fcff3309.chunk.js.LICENSE.txt */
(this["webpackJsonpkhaos-frontend"]=this["webpackJsonpkhaos-frontend"]||[]).push([[9],{1077:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(12),r=n(32),a=n(18),o=n(19),s=n(995),c={type:"change"},h={type:"start"},f={type:"end"},d=function(t){Object(a.a)(n,t);var e=Object(o.a)(n);function n(t,a){var o;Object(i.a)(this,n),o=e.call(this),void 0===a&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),a===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.object=t,o.domElement=a,o.domElement.style.touchAction="none",o.enabled=!0,o.target=new s.Vector3,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.05,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.panSpeed=1,o.screenSpacePanning=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},o.mouseButtons={LEFT:s.MOUSE.ROTATE,MIDDLE:s.MOUSE.DOLLY,RIGHT:s.MOUSE.PAN},o.touches={ONE:s.TOUCH.ROTATE,TWO:s.TOUCH.DOLLY_PAN},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o._domElementKeyEvents=null,o.getPolarAngle=function(){return m.phi},o.getAzimuthalAngle=function(){return m.theta},o.getDistance=function(){return this.object.position.distanceTo(this.target)},o.listenToKeyEvents=function(t){t.addEventListener("keydown",J),this._domElementKeyEvents=t},o.saveState=function(){d.target0.copy(d.target),d.position0.copy(d.object.position),d.zoom0=d.object.zoom},o.reset=function(){d.target.copy(d.target0),d.object.position.copy(d.position0),d.object.zoom=d.zoom0,d.object.updateProjectionMatrix(),d.dispatchEvent(c),d.update(),l=u.NONE},o.update=function(){var e=new s.Vector3,n=(new s.Quaternion).setFromUnitVectors(t.up,new s.Vector3(0,1,0)),i=n.clone().invert(),r=new s.Vector3,a=new s.Quaternion,o=2*Math.PI;return function(){var t=d.object.position;e.copy(t).sub(d.target),e.applyQuaternion(n),m.setFromVector3(e),d.autoRotate&&l===u.NONE&&I(2*Math.PI/60/60*d.autoRotateSpeed),d.enableDamping?(m.theta+=w.theta*d.dampingFactor,m.phi+=w.phi*d.dampingFactor):(m.theta+=w.theta,m.phi+=w.phi);var s=d.minAzimuthAngle,h=d.maxAzimuthAngle;return isFinite(s)&&isFinite(h)&&(s<-Math.PI?s+=o:s>Math.PI&&(s-=o),h<-Math.PI?h+=o:h>Math.PI&&(h-=o),m.theta=s<=h?Math.max(s,Math.min(h,m.theta)):m.theta>(s+h)/2?Math.max(s,m.theta):Math.min(h,m.theta)),m.phi=Math.max(d.minPolarAngle,Math.min(d.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(d.minDistance,Math.min(d.maxDistance,m.radius)),!0===d.enableDamping?d.target.addScaledVector(b,d.dampingFactor):d.target.add(b),e.setFromSpherical(m),e.applyQuaternion(i),t.copy(d.target).add(e),d.object.lookAt(d.target),!0===d.enableDamping?(w.theta*=1-d.dampingFactor,w.phi*=1-d.dampingFactor,b.multiplyScalar(1-d.dampingFactor)):(w.set(0,0,0),b.set(0,0,0)),g=1,!!(y||r.distanceToSquared(d.object.position)>p||8*(1-a.dot(d.object.quaternion))>p)&&(d.dispatchEvent(c),r.copy(d.object.position),a.copy(d.object.quaternion),y=!1,!0)}}(),o.dispose=function(){d.domElement.removeEventListener("contextmenu",$),d.domElement.removeEventListener("pointerdown",Z),d.domElement.removeEventListener("pointercancel",K),d.domElement.removeEventListener("wheel",Q),d.domElement.removeEventListener("pointermove",G),d.domElement.removeEventListener("pointerup",X),null!==d._domElementKeyEvents&&d._domElementKeyEvents.removeEventListener("keydown",J)};var d=Object(r.a)(o),u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=u.NONE,p=1e-6,m=new s.Spherical,w=new s.Spherical,g=1,b=new s.Vector3,y=!1,v=new s.Vector2,E=new s.Vector2,k=new s.Vector2,x=new s.Vector2,T=new s.Vector2,A=new s.Vector2,O=new s.Vector2,L=new s.Vector2,B=new s.Vector2,P=[],M={};function S(){return Math.pow(.95,d.zoomSpeed)}function I(t){w.theta-=t}function j(t){w.phi-=t}var D=function(){var t=new s.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),b.add(t)}}(),U=function(){var t=new s.Vector3;return function(e,n){!0===d.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(d.object.up,t)),t.multiplyScalar(e),b.add(t)}}(),F=function(){var t=new s.Vector3;return function(e,n){var i=d.domElement;if(d.object.isPerspectiveCamera){var r=d.object.position;t.copy(r).sub(d.target);var a=t.length();a*=Math.tan(d.object.fov/2*Math.PI/180),D(2*e*a/i.clientHeight,d.object.matrix),U(2*n*a/i.clientHeight,d.object.matrix)}else d.object.isOrthographicCamera?(D(e*(d.object.right-d.object.left)/d.object.zoom/i.clientWidth,d.object.matrix),U(n*(d.object.top-d.object.bottom)/d.object.zoom/i.clientHeight,d.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),d.enablePan=!1)}}();function C(t){d.object.isPerspectiveCamera?g/=t:d.object.isOrthographicCamera?(d.object.zoom=Math.max(d.minZoom,Math.min(d.maxZoom,d.object.zoom*t)),d.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),d.enableZoom=!1)}function _(t){d.object.isPerspectiveCamera?g*=t:d.object.isOrthographicCamera?(d.object.zoom=Math.max(d.minZoom,Math.min(d.maxZoom,d.object.zoom/t)),d.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),d.enableZoom=!1)}function R(t){v.set(t.clientX,t.clientY)}function N(t){x.set(t.clientX,t.clientY)}function z(){if(1===P.length)v.set(P[0].pageX,P[0].pageY);else{var t=.5*(P[0].pageX+P[1].pageX),e=.5*(P[0].pageY+P[1].pageY);v.set(t,e)}}function q(){if(1===P.length)x.set(P[0].pageX,P[0].pageY);else{var t=.5*(P[0].pageX+P[1].pageX),e=.5*(P[0].pageY+P[1].pageY);x.set(t,e)}}function W(){var t=P[0].pageX-P[1].pageX,e=P[0].pageY-P[1].pageY,n=Math.sqrt(t*t+e*e);O.set(0,n)}function V(t){if(1==P.length)E.set(t.pageX,t.pageY);else{var e=nt(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);E.set(n,i)}k.subVectors(E,v).multiplyScalar(d.rotateSpeed);var r=d.domElement;I(2*Math.PI*k.x/r.clientHeight),j(2*Math.PI*k.y/r.clientHeight),v.copy(E)}function H(t){if(1===P.length)T.set(t.pageX,t.pageY);else{var e=nt(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);T.set(n,i)}A.subVectors(T,x).multiplyScalar(d.panSpeed),F(A.x,A.y),x.copy(T)}function Y(t){var e=nt(t),n=t.pageX-e.x,i=t.pageY-e.y,r=Math.sqrt(n*n+i*i);L.set(0,r),B.set(0,Math.pow(L.y/O.y,d.zoomSpeed)),C(B.y),O.copy(L)}function Z(t){!1!==d.enabled&&(0===P.length&&(d.domElement.setPointerCapture(t.pointerId),d.domElement.addEventListener("pointermove",G),d.domElement.addEventListener("pointerup",X)),function(t){P.push(t)}(t),"touch"===t.pointerType?function(t){switch(et(t),P.length){case 1:switch(d.touches.ONE){case s.TOUCH.ROTATE:if(!1===d.enableRotate)return;z(),l=u.TOUCH_ROTATE;break;case s.TOUCH.PAN:if(!1===d.enablePan)return;q(),l=u.TOUCH_PAN;break;default:l=u.NONE}break;case 2:switch(d.touches.TWO){case s.TOUCH.DOLLY_PAN:if(!1===d.enableZoom&&!1===d.enablePan)return;d.enableZoom&&W(),d.enablePan&&q(),l=u.TOUCH_DOLLY_PAN;break;case s.TOUCH.DOLLY_ROTATE:if(!1===d.enableZoom&&!1===d.enableRotate)return;d.enableZoom&&W(),d.enableRotate&&z(),l=u.TOUCH_DOLLY_ROTATE;break;default:l=u.NONE}break;default:l=u.NONE}l!==u.NONE&&d.dispatchEvent(h)}(t):function(t){var e;switch(t.button){case 0:e=d.mouseButtons.LEFT;break;case 1:e=d.mouseButtons.MIDDLE;break;case 2:e=d.mouseButtons.RIGHT;break;default:e=-1}switch(e){case s.MOUSE.DOLLY:if(!1===d.enableZoom)return;!function(t){O.set(t.clientX,t.clientY)}(t),l=u.DOLLY;break;case s.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===d.enablePan)return;N(t),l=u.PAN}else{if(!1===d.enableRotate)return;R(t),l=u.ROTATE}break;case s.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===d.enableRotate)return;R(t),l=u.ROTATE}else{if(!1===d.enablePan)return;N(t),l=u.PAN}break;default:l=u.NONE}l!==u.NONE&&d.dispatchEvent(h)}(t))}function G(t){!1!==d.enabled&&("touch"===t.pointerType?function(t){switch(et(t),l){case u.TOUCH_ROTATE:if(!1===d.enableRotate)return;V(t),d.update();break;case u.TOUCH_PAN:if(!1===d.enablePan)return;H(t),d.update();break;case u.TOUCH_DOLLY_PAN:if(!1===d.enableZoom&&!1===d.enablePan)return;!function(t){d.enableZoom&&Y(t),d.enablePan&&H(t)}(t),d.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===d.enableZoom&&!1===d.enableRotate)return;!function(t){d.enableZoom&&Y(t),d.enableRotate&&V(t)}(t),d.update();break;default:l=u.NONE}}(t):function(t){if(!1===d.enabled)return;switch(l){case u.ROTATE:if(!1===d.enableRotate)return;!function(t){E.set(t.clientX,t.clientY),k.subVectors(E,v).multiplyScalar(d.rotateSpeed);var e=d.domElement;I(2*Math.PI*k.x/e.clientHeight),j(2*Math.PI*k.y/e.clientHeight),v.copy(E),d.update()}(t);break;case u.DOLLY:if(!1===d.enableZoom)return;!function(t){L.set(t.clientX,t.clientY),B.subVectors(L,O),B.y>0?C(S()):B.y<0&&_(S()),O.copy(L),d.update()}(t);break;case u.PAN:if(!1===d.enablePan)return;!function(t){T.set(t.clientX,t.clientY),A.subVectors(T,x).multiplyScalar(d.panSpeed),F(A.x,A.y),x.copy(T),d.update()}(t)}}(t))}function X(t){!1!==d.enabled&&(t.pointerType,d.dispatchEvent(f),l=u.NONE,tt(t),0===P.length&&(d.domElement.releasePointerCapture(t.pointerId),d.domElement.removeEventListener("pointermove",G),d.domElement.removeEventListener("pointerup",X)))}function K(t){tt(t)}function Q(t){!1===d.enabled||!1===d.enableZoom||l!==u.NONE&&l!==u.ROTATE||(t.preventDefault(),d.dispatchEvent(h),function(t){t.deltaY<0?_(S()):t.deltaY>0&&C(S()),d.update()}(t),d.dispatchEvent(f))}function J(t){!1!==d.enabled&&!1!==d.enablePan&&function(t){var e=!1;switch(t.code){case d.keys.UP:F(0,d.keyPanSpeed),e=!0;break;case d.keys.BOTTOM:F(0,-d.keyPanSpeed),e=!0;break;case d.keys.LEFT:F(d.keyPanSpeed,0),e=!0;break;case d.keys.RIGHT:F(-d.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),d.update())}(t)}function $(t){!1!==d.enabled&&t.preventDefault()}function tt(t){delete M[t.pointerId];for(var e=0;e<P.length;e++)if(P[e].pointerId==t.pointerId)return void P.splice(e,1)}function et(t){var e=M[t.pointerId];void 0===e&&(e=new s.Vector2,M[t.pointerId]=e),e.set(t.pageX,t.pageY)}function nt(t){var e=t.pointerId===P[0].pointerId?P[1]:P[0];return M[e.pointerId]}return d.domElement.addEventListener("contextmenu",$),d.domElement.addEventListener("pointerdown",Z),d.domElement.addEventListener("pointercancel",K),d.domElement.addEventListener("wheel",Q,{passive:!1}),o.update(),o}return n}(s.EventDispatcher)},1277:function(t,e,n){(function(t,i){var r;!function(){"use strict";var a="undefined"!==typeof t.exports,o=a?n(1537):window.Tar,s=a?n(1538):window.download,c=a?n(1539).GIF:window.GIF,h=a?n(1540):window.WebMWriter,f={function:!0,object:!0};function d(t){return t&&t.Object===Object?t:null}parseFloat,parseInt;var u=f[typeof e]&&e&&!e.nodeType?e:void 0,l=f[typeof t]&&t&&!t.nodeType?t:void 0,p=(l&&l.exports,d(u&&l&&"object"==typeof i&&i)),m=d(f[typeof self]&&self),w=d(f[typeof window]&&window),g=d(f[typeof this]&&this);p||w!==(g&&g.window)&&w||m||g||Function("return this")();function b(t){return String("0000000"+t).slice(-7)}"gc"in window||(window.gc=function(){}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){for(var i=atob(this.toDataURL(e,n).split(",")[1]),r=i.length,a=new Uint8Array(r),o=0;o<r;o++)a[o]=i.charCodeAt(o);t(new Blob([a],{type:e||"image/png"}))}}),function(){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var t=Date.now();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}}();var y=window.Date.now();function v(t){var e={};this.settings=t,this.on=function(t,n){e[t]=n},this.emit=function(t){var n=e[t];n&&n.apply(null,Array.prototype.slice.call(arguments,1))},this.filename=t.name||function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}(),this.extension="",this.mimeType=""}function E(t){v.call(this,t),this.extension=".tar",this.mimeType="application/x-tar",this.fileExtension="",this.baseFilename=this.filename,this.tape=null,this.count=0,this.part=1,this.frames=0}function k(t){E.call(this,t),this.type="image/png",this.fileExtension=".png"}function x(t){E.call(this,t),this.type="image/jpeg",this.fileExtension=".jpg",this.quality=t.quality/100||.8}function T(t){"image/webp"!==document.createElement("canvas").toDataURL("image/webp").substr(5,10)&&console.log("WebP not supported - try another export format"),v.call(this,t),this.quality=t.quality/100||.8,this.extension=".webm",this.mimeType="video/webm",this.baseFilename=this.filename,this.framerate=t.framerate,this.frames=0,this.part=1,this.videoWriter=new h({quality:this.quality,fileWriter:null,fd:null,frameRate:this.framerate})}function A(t){v.call(this,t),t.quality=t.quality/100||.8,this.encoder=new FFMpegServer.Video(t),this.encoder.on("process",function(){this.emit("process")}.bind(this)),this.encoder.on("finished",function(t,e){var n=this.callback;n&&(this.callback=void 0,n(t,e))}.bind(this)),this.encoder.on("progress",function(t){this.settings.onProgress&&this.settings.onProgress(t)}.bind(this)),this.encoder.on("error",function(t){alert(JSON.stringify(t,null,2))}.bind(this))}function O(t){v.call(this,t),this.framerate=this.settings.framerate,this.type="video/webm",this.extension=".webm",this.stream=null,this.mediaRecorder=null,this.chunks=[]}function L(t){v.call(this,t),t.quality=31-(30*t.quality/100||10),t.workers=t.workers||4,this.extension=".gif",this.mimeType="image/gif",this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.sizeSet=!1;var e=new Blob(["(function(b){function a(b,d){if({}.hasOwnProperty.call(a.cache,b))return a.cache[b];var e=a.resolve(b);if(!e)throw new Error('Failed to resolve module '+b);var c={id:b,require:a,filename:b,exports:{},loaded:!1,parent:d,children:[]};d&&d.children.push(c);var f=b.slice(0,b.lastIndexOf('/')+1);return a.cache[b]=c.exports,e.call(c.exports,c,c.exports,f,b),c.loaded=!0,a.cache[b]=c.exports}a.modules={},a.cache={},a.resolve=function(b){return{}.hasOwnProperty.call(a.modules,b)?a.modules[b]:void 0},a.define=function(b,c){a.modules[b]=c},a.define('/gif.worker.coffee',function(d,e,f,g){var b,c;b=a('/GIFEncoder.js',d),c=function(a){var c,e,d,f;return c=new b(a.width,a.height),a.index===0?c.writeHeader():c.firstFrame=!1,c.setTransparent(a.transparent),c.setRepeat(a.repeat),c.setDelay(a.delay),c.setQuality(a.quality),c.addFrame(a.data),a.last&&c.finish(),d=c.stream(),a.data=d.pages,a.cursor=d.cursor,a.pageSize=d.constructor.pageSize,a.canTransfer?(f=function(c){for(var b=0,d=a.data.length;b<d;++b)e=a.data[b],c.push(e.buffer);return c}.call(this,[]),self.postMessage(a,f)):self.postMessage(a)},self.onmessage=function(a){return c(a.data)}}),a.define('/GIFEncoder.js',function(e,h,i,j){function c(){this.page=-1,this.pages=[],this.newPage()}function b(a,b){this.width=~~a,this.height=~~b,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.out=new c}var f=a('/TypedNeuQuant.js',e),g=a('/LZWEncoder.js',e);c.pageSize=4096,c.charMap={};for(var d=0;d<256;d++)c.charMap[d]=String.fromCharCode(d);c.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(c.pageSize),this.cursor=0},c.prototype.getData=function(){var d='';for(var a=0;a<this.pages.length;a++)for(var b=0;b<c.pageSize;b++)d+=c.charMap[this.pages[a][b]];return d},c.prototype.writeByte=function(a){this.cursor>=c.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=a},c.prototype.writeUTFBytes=function(b){for(var c=b.length,a=0;a<c;a++)this.writeByte(b.charCodeAt(a))},c.prototype.writeBytes=function(b,d,e){for(var c=e||b.length,a=d||0;a<c;a++)this.writeByte(b[a])},b.prototype.setDelay=function(a){this.delay=Math.round(a/10)},b.prototype.setFrameRate=function(a){this.delay=Math.round(100/a)},b.prototype.setDispose=function(a){a>=0&&(this.dispose=a)},b.prototype.setRepeat=function(a){this.repeat=a},b.prototype.setTransparent=function(a){this.transparent=a},b.prototype.addFrame=function(a){this.image=a,this.getImagePixels(),this.analyzePixels(),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.writePixels(),this.firstFrame=!1},b.prototype.finish=function(){this.out.writeByte(59)},b.prototype.setQuality=function(a){a<1&&(a=1),this.sample=a},b.prototype.writeHeader=function(){this.out.writeUTFBytes('GIF89a')},b.prototype.analyzePixels=function(){var g=this.pixels.length,d=g/3;this.indexedPixels=new Uint8Array(d);var a=new f(this.pixels,this.sample);a.buildColormap(),this.colorTab=a.getColormap();var b=0;for(var c=0;c<d;c++){var e=a.lookupRGB(this.pixels[b++]&255,this.pixels[b++]&255,this.pixels[b++]&255);this.usedEntry[e]=!0,this.indexedPixels[c]=e}this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent))},b.prototype.findClosest=function(e){if(this.colorTab===null)return-1;var k=(e&16711680)>>16,l=(e&65280)>>8,m=e&255,c=0,d=16777216,j=this.colorTab.length;for(var a=0;a<j;){var f=k-(this.colorTab[a++]&255),g=l-(this.colorTab[a++]&255),h=m-(this.colorTab[a]&255),i=f*f+g*g+h*h,b=parseInt(a/3);this.usedEntry[b]&&i<d&&(d=i,c=b),a++}return c},b.prototype.getImagePixels=function(){var a=this.width,g=this.height;this.pixels=new Uint8Array(a*g*3);var b=this.image,c=0;for(var d=0;d<g;d++)for(var e=0;e<a;e++){var f=d*a*4+e*4;this.pixels[c++]=b[f],this.pixels[c++]=b[f+1],this.pixels[c++]=b[f+2]}},b.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var b,a;this.transparent===null?(b=0,a=0):(b=1,a=2),this.dispose>=0&&(a=dispose&7),a<<=2,this.out.writeByte(0|a|0|b),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},b.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},b.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},b.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes('NETSCAPE2.0'),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},b.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var b=768-this.colorTab.length;for(var a=0;a<b;a++)this.out.writeByte(0)},b.prototype.writeShort=function(a){this.out.writeByte(a&255),this.out.writeByte(a>>8&255)},b.prototype.writePixels=function(){var a=new g(this.width,this.height,this.indexedPixels,this.colorDepth);a.encode(this.out)},b.prototype.stream=function(){return this.out},e.exports=b}),a.define('/LZWEncoder.js',function(e,g,h,i){function f(y,D,C,B){function w(a,b){r[f++]=a,f>=254&&t(b)}function x(b){u(a),k=i+2,j=!0,l(i,b)}function u(b){for(var a=0;a<b;++a)h[a]=-1}function A(z,r){var g,t,d,e,y,w,s;for(q=z,j=!1,n_bits=q,m=p(n_bits),i=1<<z-1,o=i+1,k=i+2,f=0,e=v(),s=0,g=a;g<65536;g*=2)++s;s=8-s,w=a,u(w),l(i,r);a:while((t=v())!=c){if(g=(t<<b)+e,d=t<<s^e,h[d]===g){e=n[d];continue}if(h[d]>=0){y=w-d,d===0&&(y=1);do if((d-=y)<0&&(d+=w),h[d]===g){e=n[d];continue a}while(h[d]>=0)}l(e,r),e=t,k<1<<b?(n[d]=k++,h[d]=g):x(r)}l(e,r),l(o,r)}function z(a){a.writeByte(s),remaining=y*D,curPixel=0,A(s+1,a),a.writeByte(0)}function t(a){f>0&&(a.writeByte(f),a.writeBytes(r,0,f),f=0)}function p(a){return(1<<a)-1}function v(){if(remaining===0)return c;--remaining;var a=C[curPixel++];return a&255}function l(a,c){g&=d[e],e>0?g|=a<<e:g=a,e+=n_bits;while(e>=8)w(g&255,c),g>>=8,e-=8;if((k>m||j)&&(j?(m=p(n_bits=q),j=!1):(++n_bits,n_bits==b?m=1<<b:m=p(n_bits))),a==o){while(e>0)w(g&255,c),g>>=8,e-=8;t(c)}}var s=Math.max(2,B),r=new Uint8Array(256),h=new Int32Array(a),n=new Int32Array(a),g,e=0,f,k=0,m,j=!1,q,i,o;this.encode=z}var c=-1,b=12,a=5003,d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.exports=f}),a.define('/TypedNeuQuant.js',function(A,F,E,D){function C(A,B){function I(){o=[],q=new Int32Array(256),t=new Int32Array(a),y=new Int32Array(a),z=new Int32Array(a>>3);var c,d;for(c=0;c<a;c++)d=(c<<b+8)/a,o[c]=new Float64Array([d,d,d,0]),y[c]=e/a,t[c]=0}function J(){for(var c=0;c<a;c++)o[c][0]>>=b,o[c][1]>>=b,o[c][2]>>=b,o[c][3]=c}function K(b,a,c,e,f){o[a][0]-=b*(o[a][0]-c)/d,o[a][1]-=b*(o[a][1]-e)/d,o[a][2]-=b*(o[a][2]-f)/d}function L(j,e,n,l,k){var h=Math.abs(e-j),i=Math.min(e+j,a),g=e+1,f=e-1,m=1,b,d;while(g<i||f>h)d=z[m++],g<i&&(b=o[g++],b[0]-=d*(b[0]-n)/c,b[1]-=d*(b[1]-l)/c,b[2]-=d*(b[2]-k)/c),f>h&&(b=o[f--],b[0]-=d*(b[0]-n)/c,b[1]-=d*(b[1]-l)/c,b[2]-=d*(b[2]-k)/c)}function C(p,s,q){var h=2147483647,k=h,d=-1,m=d,c,j,e,n,l;for(c=0;c<a;c++)j=o[c],e=Math.abs(j[0]-p)+Math.abs(j[1]-s)+Math.abs(j[2]-q),e<h&&(h=e,d=c),n=e-(t[c]>>i-b),n<k&&(k=n,m=c),l=y[c]>>g,y[c]-=l,t[c]+=l<<f;return y[d]+=x,t[d]-=r,m}function D(){var d,b,e,c,h,g,f=0,i=0;for(d=0;d<a;d++){for(e=o[d],h=d,g=e[1],b=d+1;b<a;b++)c=o[b],c[1]<g&&(h=b,g=c[1]);if(c=o[h],d!=h&&(b=c[0],c[0]=e[0],e[0]=b,b=c[1],c[1]=e[1],e[1]=b,b=c[2],c[2]=e[2],e[2]=b,b=c[3],c[3]=e[3],e[3]=b),g!=f){for(q[f]=i+d>>1,b=f+1;b<g;b++)q[b]=d;f=g,i=d}}for(q[f]=i+n>>1,b=f+1;b<256;b++)q[b]=n}function E(j,i,k){var b,d,c,e=1e3,h=-1,f=q[i],g=f-1;while(f<a||g>=0)f<a&&(d=o[f],c=d[1]-i,c>=e?f=a:(f++,c<0&&(c=-c),b=d[0]-j,b<0&&(b=-b),c+=b,c<e&&(b=d[2]-k,b<0&&(b=-b),c+=b,c<e&&(e=c,h=d[3])))),g>=0&&(d=o[g],c=i-d[1],c>=e?g=-1:(g--,c<0&&(c=-c),b=d[0]-j,b<0&&(b=-b),c+=b,c<e&&(b=d[2]-k,b<0&&(b=-b),c+=b,c<e&&(e=c,h=d[3]))));return h}function F(){var c,f=A.length,D=30+(B-1)/3,y=f/(3*B),q=~~(y/w),n=d,o=u,a=o>>h;for(a<=1&&(a=0),c=0;c<a;c++)z[c]=n*((a*a-c*c)*m/(a*a));var i;f<s?(B=1,i=3):f%l!==0?i=3*l:f%k!==0?i=3*k:f%p!==0?i=3*p:i=3*j;var r,t,x,e,g=0;c=0;while(c<y)if(r=(A[g]&255)<<b,t=(A[g+1]&255)<<b,x=(A[g+2]&255)<<b,e=C(r,t,x),K(n,e,r,t,x),a!==0&&L(a,e,r,t,x),g+=i,g>=f&&(g-=f),c++,q===0&&(q=1),c%q===0)for(n-=n/D,o-=o/v,a=o>>h,a<=1&&(a=0),e=0;e<a;e++)z[e]=n*((a*a-e*e)*m/(a*a))}function G(){I(),F(),J(),D()}function H(){var b=[],g=[];for(var c=0;c<a;c++)g[o[c][3]]=c;var d=0;for(var e=0;e<a;e++){var f=g[e];b[d++]=o[f][0],b[d++]=o[f][1],b[d++]=o[f][2]}return b}var o,q,t,y,z;this.buildColormap=G,this.getColormap=H,this.lookupRGB=E}var w=100,a=256,n=a-1,b=4,i=16,e=1<<i,f=10,B=1<<f,g=10,x=e>>g,r=e<<f-g,z=a>>3,h=6,t=1<<h,u=z*t,v=30,o=10,d=1<<o,q=8,m=1<<q,y=o+q,c=1<<y,l=499,k=491,p=487,j=503,s=3*j;A.exports=C}),a('/gif.worker.coffee')}.call(this,this))"],{type:"application/javascript"}),n=URL.createObjectURL(e);this.encoder=new c({workers:t.workers,quality:t.quality,workerScript:n}),this.encoder.on("progress",function(t){this.settings.onProgress&&this.settings.onProgress(t)}.bind(this)),this.encoder.on("finished",function(t){var e=this.callback;e&&(this.callback=void 0,e(t))}.bind(this))}function B(t){var e,n,i,r,a,o,c,h=t||{},f=(new Date,[]),d=[],u=0,l=0,p=[],m=!1,w={};h.framerate=h.framerate||60,h.motionBlurFrames=2*(h.motionBlurFrames||1),e=h.verbose||!1,h.display,h.step=1e3/h.framerate,h.timeLimit=h.timeLimit||0,h.frameLimit=h.frameLimit||0,h.startTime=h.startTime||0;var g=document.createElement("div");g.style.position="absolute",g.style.left=g.style.top=0,g.style.backgroundColor="black",g.style.fontFamily="monospace",g.style.fontSize="11px",g.style.padding="5px",g.style.color="red",g.style.zIndex=1e5,h.display&&document.body.appendChild(g);var b,v,E=document.createElement("canvas"),B=E.getContext("2d");H("Step is set to "+h.step+"ms");var P={gif:L,webm:T,ffmpegserver:A,png:k,jpg:x,"webm-mediarecorder":O},M=P[h.format];if(!M)throw"Error: Incorrect or missing format: Valid formats are "+Object.keys(P).join(", ");if((c=new M(h)).step=o,c.on("process",W),c.on("progress",(function(t){!function(t){var e=w[t];e&&e.apply(null,Array.prototype.slice.call(arguments,1))}("progress",t)})),"performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var S=Date.now();performance.timing&&performance.timing.navigationStart&&(S=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-S}}var I=window.setTimeout,j=window.setInterval,D=window.clearInterval,U=window.clearTimeout,F=window.requestAnimationFrame,C=window.Date.now,_=window.performance.now,R=window.Date.prototype.getTime,N=[];function z(){m=!1,c.stop(),H("Capturer stop"),window.setTimeout=I,window.setInterval=j,window.clearInterval=D,window.clearTimeout=U,window.requestAnimationFrame=F,window.Date.prototype.getTime=R,window.Date.now=C,window.performance.now=_}function q(t,e){I(t,0,e)}function o(){q(W)}function W(){var t=1e3/h.framerate,e=(u+l/h.motionBlurFrames)*t;n=i+e,r=a+e,N.forEach((function(t){t._hookedTime=e/1e3})),function(){var t=u/h.framerate;(h.frameLimit&&u>=h.frameLimit||h.timeLimit&&t>=h.timeLimit)&&(z(),V());var e=new Date(null);e.setSeconds(t),h.motionBlurFrames>2?g.textContent="CCapture "+h.format+" | "+u+" frames ("+l+" inter) | "+e.toISOString().substr(11,8):g.textContent="CCapture "+h.format+" | "+u+" frames | "+e.toISOString().substr(11,8)}(),H("Frame: "+u+" "+l);for(var o=0;o<f.length;o++)n>=f[o].triggerTime&&(q(f[o].callback),f.splice(o,1));for(o=0;o<d.length;o++)n>=d[o].triggerTime&&(q(d[o].callback),d[o].triggerTime+=d[o].time);p.forEach((function(t){q(t,n-y)})),p=[]}function V(t){t||(t=function(t){return s(t,c.filename+c.extension,c.mimeType),!1}),c.save(t)}function H(t){e&&console.log(t)}return{start:function(){!function(){function t(){return this._hooked||(this._hooked=!0,this._hookedTime=this.currentTime||0,this.pause(),N.push(this)),this._hookedTime+h.startTime}H("Capturer start"),i=window.Date.now(),n=i+h.startTime,a=window.performance.now(),r=a+h.startTime,window.Date.prototype.getTime=function(){return n},window.Date.now=function(){return n},window.setTimeout=function(t,e){var i={callback:t,time:e,triggerTime:n+e};return f.push(i),H("Timeout set to "+i.time),i},window.clearTimeout=function(t){for(var e=0;e<f.length;e++)f[e]!=t||(f.splice(e,1),H("Timeout cleared"))},window.setInterval=function(t,e){var i={callback:t,time:e,triggerTime:n+e};return d.push(i),H("Interval set to "+i.time),i},window.clearInterval=function(t){return H("clear Interval"),null},window.requestAnimationFrame=function(t){p.push(t)},window.performance.now=function(){return r};try{Object.defineProperty(HTMLVideoElement.prototype,"currentTime",{get:t}),Object.defineProperty(HTMLAudioElement.prototype,"currentTime",{get:t})}catch(e){H(e)}}(),c.start(),m=!0},capture:function(t){m&&(h.motionBlurFrames>2?(function(t){E.width===t.width&&E.height===t.height||(E.width=t.width,E.height=t.height,b=new Uint16Array(E.height*E.width*4),B.fillStyle="#0",B.fillRect(0,0,E.width,E.height))}(t),function(t){B.drawImage(t,0,0),v=B.getImageData(0,0,E.width,E.height);for(var e=0;e<b.length;e+=4)b[e]+=v.data[e],b[e+1]+=v.data[e+1],b[e+2]+=v.data[e+2];l++}(t),l>=.5*h.motionBlurFrames?function(){for(var t=v.data,e=0;e<b.length;e+=4)t[e]=2*b[e]/h.motionBlurFrames,t[e+1]=2*b[e+1]/h.motionBlurFrames,t[e+2]=2*b[e+2]/h.motionBlurFrames;for(B.putImageData(v,0,0),c.add(E),u++,l=0,H("Full MB Frame! "+u+" "+n),e=0;e<b.length;e+=4)b[e]=0,b[e+1]=0,b[e+2]=0;gc()}():o()):(c.add(t),H("Full Frame! "+ ++u)))},stop:z,save:V,on:function(t,e){w[t]=e}}}v.prototype.start=function(){},v.prototype.stop=function(){},v.prototype.add=function(){},v.prototype.save=function(){},v.prototype.dispose=function(){},v.prototype.safeToProceed=function(){return!0},v.prototype.step=function(){console.log("Step not set!")},E.prototype=Object.create(v.prototype),E.prototype.start=function(){this.dispose()},E.prototype.add=function(t){var e=new FileReader;e.onload=function(){this.tape.append(b(this.count)+this.fileExtension,new Uint8Array(e.result)),this.settings.autoSaveTime>0&&this.frames/this.settings.framerate>=this.settings.autoSaveTime?this.save(function(t){this.filename=this.baseFilename+"-part-"+b(this.part),s(t,this.filename+this.extension,this.mimeType);var e=this.count;this.dispose(),this.count=e+1,this.part++,this.filename=this.baseFilename+"-part-"+b(this.part),this.frames=0,this.step()}.bind(this)):(this.count++,this.frames++,this.step())}.bind(this),e.readAsArrayBuffer(t)},E.prototype.save=function(t){t(this.tape.save())},E.prototype.dispose=function(){this.tape=new o,this.count=0},k.prototype=Object.create(E.prototype),k.prototype.add=function(t){t.toBlob(function(t){E.prototype.add.call(this,t)}.bind(this),this.type)},x.prototype=Object.create(E.prototype),x.prototype.add=function(t){t.toBlob(function(t){E.prototype.add.call(this,t)}.bind(this),this.type,this.quality)},T.prototype=Object.create(v.prototype),T.prototype.start=function(t){this.dispose()},T.prototype.add=function(t){this.videoWriter.addFrame(t),this.settings.autoSaveTime>0&&this.frames/this.settings.framerate>=this.settings.autoSaveTime?this.save(function(t){this.filename=this.baseFilename+"-part-"+b(this.part),s(t,this.filename+this.extension,this.mimeType),this.dispose(),this.part++,this.filename=this.baseFilename+"-part-"+b(this.part),this.step()}.bind(this)):(this.frames++,this.step())},T.prototype.save=function(t){this.videoWriter.complete().then(t)},T.prototype.dispose=function(t){this.frames=0,this.videoWriter=new h({quality:this.quality,fileWriter:null,fd:null,frameRate:this.framerate})},A.prototype=Object.create(v.prototype),A.prototype.start=function(){this.encoder.start(this.settings)},A.prototype.add=function(t){this.encoder.add(t)},A.prototype.save=function(t){this.callback=t,this.encoder.end()},A.prototype.safeToProceed=function(){return this.encoder.safeToProceed()},O.prototype=Object.create(v.prototype),O.prototype.add=function(t){this.stream||(this.stream=t.captureStream(this.framerate),this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=function(t){this.chunks.push(t.data)}.bind(this)),this.step()},O.prototype.save=function(t){this.mediaRecorder.onstop=function(e){var n=new Blob(this.chunks,{type:"video/webm"});this.chunks=[],t(n)}.bind(this),this.mediaRecorder.stop()},L.prototype=Object.create(v.prototype),L.prototype.add=function(t){this.sizeSet||(this.encoder.setOption("width",t.width),this.encoder.setOption("height",t.height),this.sizeSet=!0),this.canvas.width=t.width,this.canvas.height=t.height,this.ctx.drawImage(t,0,0),this.encoder.addFrame(this.ctx,{copy:!0,delay:this.settings.step}),this.step()},L.prototype.save=function(t){this.callback=t,this.encoder.render()},(w||m||{}).CCapture=B,void 0===(r=function(){return B}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n(208)(t),n(95))},1278:function(t,e){},1537:function(t,e,n){!function(){"use strict";var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];function e(t){var e,n=new Uint8Array(t);for(e=0;e<t;e+=1)n[e]=0;return n}window.utils={},window.utils.clean=e,window.utils.pad=function(t,e,n){return t=t.toString(n||8),"000000000000".substr(t.length+12-e)+t},window.utils.extend=function(t,n,i,r){var a=e((parseInt((n+i)/r)+1)*r);return a.set(t),a},window.utils.stringToUint8=function(t,n,i){var r,a;for(n=n||e(t.length),i=i||0,r=0,a=t.length;r<a;r+=1)n[i]=t.charCodeAt(r),i+=1;return n},window.utils.uint8ToBase64=function(e){var n,i,r,a,o=e.length%3,s="";for(n=0,r=e.length-o;n<r;n+=3)i=(e[n]<<16)+(e[n+1]<<8)+e[n+2],s+=t[(a=i)>>18&63]+t[a>>12&63]+t[a>>6&63]+t[63&a];switch(s.length%4){case 1:s+="=";break;case 2:s+="=="}return s}}(),function(){"use strict";var t,e=window.utils;t=[{field:"fileName",length:100},{field:"fileMode",length:8},{field:"uid",length:8},{field:"gid",length:8},{field:"fileSize",length:12},{field:"mtime",length:12},{field:"checksum",length:8},{field:"type",length:1},{field:"linkName",length:100},{field:"ustar",length:8},{field:"owner",length:32},{field:"group",length:32},{field:"majorNumber",length:8},{field:"minorNumber",length:8},{field:"filenamePrefix",length:155},{field:"padding",length:12}],window.header={},window.header.structure=t,window.header.format=function(n,i){var r=e.clean(512),a=0;return t.forEach((function(t){var e,i,o=n[t.field]||"";for(e=0,i=o.length;e<i;e+=1)r[a]=o.charCodeAt(e),a+=1;a+=t.length-e})),"function"===typeof i?i(r,a):r}}(),function(){"use strict";var e,n=window.header,i=window.utils,r=512;function a(t){this.written=0,e=(t||20)*r,this.out=i.clean(e),this.blocks=[],this.length=0}a.prototype.append=function(t,e,a,o){var s,c,h,f,d,u,l;if("string"===typeof e)e=i.stringToUint8(e);else if(e.constructor!==Uint8Array.prototype.constructor)throw"Invalid input type. You gave me: "+e.constructor.toString().match(/function\s*([$A-Za-z_][0-9A-Za-z_]*)\s*\(/)[1];"function"===typeof a&&(a,a={}),h=(a=a||{}).mode||4095&parseInt("777",8),f=a.mtime||Math.floor(+new Date/1e3),d=a.uid||0,u=a.gid||0,s={fileName:t,fileMode:i.pad(h,7),uid:i.pad(d,7),gid:i.pad(u,7),fileSize:i.pad(e.length,11),mtime:i.pad(f,11),checksum:"        ",type:"0",ustar:"ustar  ",owner:a.owner||"",group:a.group||""},c=0,Object.keys(s).forEach((function(t){var e,n,i=s[t];for(e=0,n=i.length;e<n;e+=1)c+=i.charCodeAt(e)})),s.checksum=i.pad(c,6)+"\0 ",l=n.format(s);var p=Math.ceil(l.length/r)*r,m=Math.ceil(e.length/r)*r;this.blocks.push({header:l,input:e,headerLength:p,inputLength:m})},a.prototype.save=function(){var t=[],e=[],n=0,i=Math.pow(2,20),r=[];return this.blocks.forEach((function(t){n+t.headerLength+t.inputLength>i&&(e.push({blocks:r,length:n}),r=[],n=0),r.push(t),n+=t.headerLength+t.inputLength})),e.push({blocks:r,length:n}),e.forEach((function(e){var n=new Uint8Array(e.length),i=0;e.blocks.forEach((function(t){n.set(t.header,i),i+=t.headerLength,n.set(t.input,i),i+=t.inputLength})),t.push(n)})),t.push(new Uint8Array(1024)),new Blob(t,{type:"octet/stream"})},a.prototype.clear=function(){this.written=0,this.out=i.clean(e)},"undefined"!==typeof t.exports?t.exports=a:window.Tar=a}()},1538:function(t,e,n){var i,r,a;r=[],void 0===(a="function"===typeof(i=function(){return function t(e,n,i){var r,a,o=window,s="application/octet-stream",c=i||s,h=e,f=!n&&!i&&h,d=document.createElement("a"),u=function(t){return String(t)},l=o.Blob||o.MozBlob||o.WebKitBlob||u,p=n||"download";if(l=l.call?l.bind(o):Blob,"true"===String(this)&&(c=(h=[h,c])[0],h=h[1]),f&&f.length<2048&&(p=f.split("/").pop().split("?")[0],d.href=f,-1!==d.href.indexOf(f))){var m=new XMLHttpRequest;return m.open("GET",f,!0),m.responseType="blob",m.onload=function(e){t(e.target.response,p,s)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(h)){if(!(h.length>2096103.424&&l!==u))return navigator.msSaveBlob?navigator.msSaveBlob(y(h),p):v(h);c=(h=y(h)).type||s}else if(/([\x80-\xff])/.test(h)){for(var w=0,g=new Uint8Array(h.length),b=g.length;w<b;++w)g[w]=h.charCodeAt(w);h=new l([g],{type:c})}function y(t){for(var e=t.split(/[:;,]/),n=e[1],i=("base64"==e[t.indexOf("charset")>0?3:2]?atob:decodeURIComponent)(e.pop()),r=i.length,a=0,o=new Uint8Array(r);a<r;++a)o[a]=i.charCodeAt(a);return new l([o],{type:n})}function v(t,e){if("download"in d)return d.href=t,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",d.addEventListener("click",(function(t){t.stopPropagation(),this.removeEventListener("click",arguments.callee)})),document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===e&&setTimeout((function(){o.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=h instanceof l?h:new l([h],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(o.URL)v(o.URL.createObjectURL(r),!0);else{if("string"===typeof r||r.constructor===u)try{return v("data:"+c+";base64,"+o.btoa(r))}catch(E){return v("data:"+c+","+encodeURIComponent(r))}(a=new FileReader).onload=function(t){v(this.result)},a.readAsDataURL(r)}return!0}})?i.apply(e,r):i)||(t.exports=a)},1539:function(t,e){(function(t){function e(t,n){if({}.hasOwnProperty.call(e.cache,t))return e.cache[t];var i=e.resolve(t);if(!i)throw new Error("Failed to resolve module "+t);var r={id:t,require:e,filename:t,exports:{},loaded:!1,parent:n,children:[]};n&&n.children.push(r);var a=t.slice(0,t.lastIndexOf("/")+1);return e.cache[t]=r.exports,i.call(r.exports,r,r.exports,a,t),r.loaded=!0,e.cache[t]=r.exports}e.modules={},e.cache={},e.resolve=function(t){return{}.hasOwnProperty.call(e.modules,t)?e.modules[t]:void 0},e.define=function(t,n){e.modules[t]=n};var n=function(e){return e="/",{title:"browser",version:"v0.10.26",browser:!0,env:{},argv:[],nextTick:t.setImmediate||function(t){setTimeout(t,0)},cwd:function(){return e},chdir:function(t){e=t}}}();e.define("/gif.coffee",(function(t,n,i,r){function a(t,e){return{}.hasOwnProperty.call(t,e)}var o,s,c,h,f;c=e("events",t).EventEmitter,o=e("/browser.coffee",t),f=function(t){function e(t){var e,n;for(e in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),s)n=s[e],null!=this.options[e]?this.options[e]:this.options[e]=n}return function(t,e){function n(){this.constructor=t}for(var i in e)a(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),s={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null},h={delay:500,copy:!1},e.prototype.setOption=function(t,e){return this.options[t]=e,null==this._canvas||"width"!==t&&"height"!==t?void 0:this._canvas[t]=e},e.prototype.setOptions=function(t){var e,n;return function(i){for(e in t)a(t,e)&&(n=t[e],i.push(this.setOption(e,n)));return i}.call(this,[])},e.prototype.addFrame=function(t,e){var n,i;for(i in null==e&&(e={}),(n={}).transparent=this.options.transparent,h)n[i]=e[i]||h[i];if(null!=this.options.width||this.setOption("width",t.width),null!=this.options.height||this.setOption("height",t.height),"undefined"!==typeof ImageData&&null!=ImageData&&t instanceof ImageData)n.data=t.data;else if("undefined"!==typeof CanvasRenderingContext2D&&null!=CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!==typeof WebGLRenderingContext&&null!=WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?n.data=this.getContextData(t):n.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?n.data=this.getImageData(t):n.image=t}return this.frames.push(n)},e.prototype.render=function(){var t;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(t){for(var e=function(){var t;t=[];for(var e=0;0<=this.frames.length?e<this.frames.length:e>this.frames.length;0<=this.frames.length?++e:--e)t.push(e);return t}.apply(this,arguments),n=0,i=e.length;n<i;++n)e[n],t.push(null);return t}.call(this,[]),t=this.spawnWorkers();for(var e=function(){var e;e=[];for(var n=0;0<=t?n<t:n>t;0<=t?++n:--n)e.push(n);return e}.apply(this,arguments),n=0,i=e.length;n<i;++n)e[n],this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},e.prototype.abort=function(){for(var t;null!=(t=this.activeWorkers.shift());)console.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},e.prototype.spawnWorkers=function(){var t;return t=Math.min(this.options.workers,this.frames.length),function(){var e;e=[];for(var n=this.freeWorkers.length;this.freeWorkers.length<=t?n<t:n>t;this.freeWorkers.length<=t?++n:--n)e.push(n);return e}.apply(this,arguments).forEach(function(t){return function(e){var n;return console.log("spawning worker "+e),(n=new Worker(t.options.workerScript)).onmessage=function(t){return function(e){return t.activeWorkers.splice(t.activeWorkers.indexOf(n),1),t.freeWorkers.push(n),t.frameFinished(e.data)}}(t),t.freeWorkers.push(n)}}(this)),t},e.prototype.frameFinished=function(t){return console.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,function(t,e){for(var n=0,i=e.length;n<i;++n)if(n in e&&e[n]===t)return!0;return!1}(null,this.imageParts)?this.renderNextFrame():this.finishRendering()},e.prototype.finishRendering=function(){var t,e,n,i,r,a,o;r=0;for(var s=0,c=this.imageParts.length;s<c;++s)r+=((e=this.imageParts[s]).data.length-1)*e.pageSize+e.cursor;r+=e.pageSize-e.cursor,console.log("rendering finished - filesize "+Math.round(r/1e3)+"kb"),t=new Uint8Array(r),a=0;for(var h=0,f=this.imageParts.length;h<f;++h)for(var d=0,u=(e=this.imageParts[h]).data.length;d<u;++d)o=e.data[d],n=d,t.set(o,a),n===e.data.length-1?a+=e.cursor:a+=e.pageSize;return i=new Blob([t],{type:"image/gif"}),this.emit("finished",i,t)},e.prototype.renderNextFrame=function(){var t,e,n;if(0===this.freeWorkers.length)throw new Error("No free workers");return this.nextFrame>=this.frames.length?void 0:(t=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),e=this.getTask(t),console.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(e))},e.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},e.prototype.getImageData=function(t){var e;return null!=this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(e=this._canvas.getContext("2d")).setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},e.prototype.getTask=function(t){var e,n;if(n={index:e=this.frames.indexOf(t),last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,repeat:this.options.repeat,canTransfer:"chrome"===o.name},null!=t.data)n.data=t.data;else if(null!=t.context)n.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");n.data=this.getImageData(t.image)}return n},e}(c),t.exports=f})),e.define("/browser.coffee",(function(t,e,n,i){var r,a,o,s,c;s=navigator.userAgent.toLowerCase(),o=navigator.platform.toLowerCase(),a="ie"===(c=s.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(r={name:"version"===c[1]?c[3]:c[1],version:a||parseFloat("opera"===c[1]&&c[4]?c[4]:c[2]),platform:{name:s.match(/ip(?:ad|od|hone)/)?"ios":(s.match(/(?:webos|android)/)||o.match(/mac|win|linux/)||["other"])[0]}})[r.name]=!0,r[r.name+parseInt(r.version,10)]=!0,r.platform[r.platform.name]=!0,t.exports=r})),e.define("events",(function(t,e,i,r){n.EventEmitter||(n.EventEmitter=function(){});var a=e.EventEmitter=n.EventEmitter,o="function"===typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};a.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},a.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||o(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"!=typeof e){if(o(e)){for(var n=Array.prototype.slice.call(arguments,1),i=e.slice(),r=0,a=i.length;r<a;r++)i[r].apply(this,n);return!0}return!1}switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0},a.prototype.addListener=function(t,e){if("function"!==typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(o(this._events[t])){var n;if(!this._events[t].warned)(n=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace());this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(t,e){var n=this;return n.on(t,(function i(){n.removeListener(t,i),e.apply(this,arguments)})),this},a.prototype.removeListener=function(t,e){if("function"!==typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(o(n)){var i=n.indexOf(e);if(i<0)return this;n.splice(i,1),0==n.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},a.prototype.removeAllListeners=function(t){return t&&this._events&&this._events[t]&&(this._events[t]=null),this},a.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),o(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}})),t.GIF=e("/gif.coffee")}).call(this,this)},1540:function(t,e,n){"use strict";(function(e){!function(){var i="undefined"!==typeof t.exports,r=function(t){this.data=new Uint8Array(t),this.pos=0};r.prototype.seek=function(t){this.pos=t},r.prototype.writeBytes=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t[e]},r.prototype.writeByte=function(t){this.data[this.pos++]=t},r.prototype.writeU8=r.prototype.writeByte,r.prototype.writeU16BE=function(t){this.data[this.pos++]=t>>8,this.data[this.pos++]=t},r.prototype.writeDoubleBE=function(t){for(var e=new Uint8Array(new Float64Array([t]).buffer),n=e.length-1;n>=0;n--)this.writeByte(e[n])},r.prototype.writeFloatBE=function(t){for(var e=new Uint8Array(new Float32Array([t]).buffer),n=e.length-1;n>=0;n--)this.writeByte(e[n])},r.prototype.writeString=function(t){for(var e=0;e<t.length;e++)this.data[this.pos++]=t.charCodeAt(e)},r.prototype.writeEBMLVarIntWidth=function(t,e){switch(e){case 1:this.writeU8(128|t);break;case 2:this.writeU8(64|t>>8),this.writeU8(t);break;case 3:this.writeU8(32|t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 4:this.writeU8(16|t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 5:this.writeU8(8|t/4294967296&7),this.writeU8(t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;default:throw new RuntimeException("Bad EBML VINT size "+e)}},r.prototype.measureEBMLVarInt=function(t){if(t<127)return 1;if(t<16383)return 2;if(t<2097151)return 3;if(t<268435455)return 4;if(t<34359738367)return 5;throw new RuntimeException("EBML VINT size not supported "+t)},r.prototype.writeEBMLVarInt=function(t){this.writeEBMLVarIntWidth(t,this.measureEBMLVarInt(t))},r.prototype.writeUnsignedIntBE=function(t,e){switch(void 0===e&&(e=this.measureUnsignedInt(t)),e){case 5:this.writeU8(Math.floor(t/4294967296));case 4:this.writeU8(t>>24);case 3:this.writeU8(t>>16);case 2:this.writeU8(t>>8);case 1:this.writeU8(t);break;default:throw new RuntimeException("Bad UINT size "+e)}},r.prototype.measureUnsignedInt=function(t){return t<256?1:t<65536?2:t<1<<24?3:t<4294967296?4:5},r.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayBufferDataStream's pos lies beyond end of buffer"},window.ArrayBufferDataStream=r;var a,o=(a=i?n(1278):null,function(t){var n=[],i=Promise.resolve(),r=null,o=null;function s(t){return new Promise((function(e,n){var i=new FileReader;i.addEventListener("loadend",(function(){e(i.result)})),i.readAsArrayBuffer(t)}))}function c(t){return new Promise((function(e,n){t instanceof Uint8Array?e(t):t instanceof ArrayBuffer||ArrayBuffer.isView(t)?e(new Uint8Array(t)):t instanceof Blob?e(s(t).then((function(t){return new Uint8Array(t)}))):e(s(new Blob([t])).then((function(t){return new Uint8Array(t)})))}))}function h(t){var e=t.byteLength||t.length||t.size;if(!Number.isInteger(e))throw"Failed to determine size of element";return e}"undefined"!==typeof FileWriter&&t instanceof FileWriter?r=t:a&&t&&(o=t),this.pos=0,this.length=0,this.seek=function(t){if(t<0)throw"Offset may not be negative";if(isNaN(t))throw"Offset may not be NaN";if(t>this.length)throw"Seeking beyond the end of file is not allowed";this.pos=t},this.write=function(t){var s={offset:this.pos,data:t,length:h(t)},f=s.offset>=this.length;this.pos+=s.length,this.length=Math.max(this.length,this.pos),i=i.then((function(){if(o)return new Promise((function(t,n){c(s.data).then((function(n){var i=0,r=e.from(n.buffer);a.write(o,r,0,r.length,s.offset,(function e(n,r,c){(i+=r)>=c.length?t():a.write(o,c,i,c.length-i,s.offset+i,e)}))}))}));if(r)return new Promise((function(t,e){r.onwriteend=t,r.seek(s.offset),r.write(new Blob([s.data]))}));if(!f)for(var t=0;t<n.length;t++){var i=n[t];if(!(s.offset+s.length<=i.offset||s.offset>=i.offset+i.length)){if(s.offset<i.offset||s.offset+s.length>i.offset+i.length)throw new Error("Overwrite crosses blob boundaries");return s.offset==i.offset&&s.length==i.length?void(i.data=s.data):c(i.data).then((function(t){return i.data=t,c(s.data)})).then((function(t){s.data=t,i.data.set(s.data,s.offset-i.offset)}))}}n.push(s)}))},this.complete=function(t){return i=o||r?i.then((function(){return null})):i.then((function(){for(var e=[],i=0;i<n.length;i++)e.push(n[i].data);return new Blob(e,{mimeType:t})}))}});window.BlobBuffer=o;var s=function(t,e){function n(t,e){var n,i=t.toDataURL("image/webp",{quality:e});return!("string"!==typeof(n=i)||!n.match(/^data:image\/webp;base64,/i))&&window.atob(n.substring("data:image/webp;base64,".length))}function i(t){var e=t.indexOf("VP8 ");if(-1==e)throw"Failed to identify beginning of keyframe in WebP image";return e+="VP8 ".length+4,t.substring(e)}function r(t){this.value=t}function a(t){this.value=t}function o(t,e,n){if(Array.isArray(n))for(var i=0;i<n.length;i++)o(t,e,n[i]);else if("string"===typeof n)t.writeString(n);else if(n instanceof Uint8Array)t.writeBytes(n);else{if(!n.id)throw"Bad EBML datatype "+typeof n.data;var s,c,h;if(n.offset=t.pos+e,t.writeUnsignedIntBE(n.id),Array.isArray(n.data))-1===n.size?t.writeByte(255):(s=t.pos,t.writeBytes([0,0,0,0])),c=t.pos,n.dataOffset=c+e,o(t,e,n.data),-1!==n.size&&(h=t.pos,n.size=h-c,t.seek(s),t.writeEBMLVarIntWidth(n.size,4),t.seek(h));else if("string"===typeof n.data)t.writeEBMLVarInt(n.data.length),n.dataOffset=t.pos+e,t.writeString(n.data);else if("number"===typeof n.data)n.size||(n.size=t.measureUnsignedInt(n.data)),t.writeEBMLVarInt(n.size),n.dataOffset=t.pos+e,t.writeUnsignedIntBE(n.data,n.size);else if(n.data instanceof a)t.writeEBMLVarInt(8),n.dataOffset=t.pos+e,t.writeDoubleBE(n.data.value);else if(n.data instanceof r)t.writeEBMLVarInt(4),n.dataOffset=t.pos+e,t.writeFloatBE(n.data.value);else{if(!(n.data instanceof Uint8Array))throw"Bad EBML datatype "+typeof n.data;t.writeEBMLVarInt(n.data.byteLength),n.dataOffset=t.pos+e,t.writeBytes(n.data)}}}return function(r){var s,c,h,f,d=!1,u=[],l=0,p=0,m={Cues:{id:new Uint8Array([28,83,187,107]),positionEBML:null},SegmentInfo:{id:new Uint8Array([21,73,169,102]),positionEBML:null},Tracks:{id:new Uint8Array([22,84,174,107]),positionEBML:null}},w={id:17545,data:new a(0)},g=[],b=new e(r.fileWriter||r.fd);function y(t){return t-h.dataOffset}function v(){f=function(){var t={id:21420,size:5,data:0},e={id:290298740,data:[]};for(var n in m){var i=m[n];i.positionEBML=Object.create(t),e.data.push({id:19899,data:[{id:21419,data:i.id},i.positionEBML]})}return e}();var e={id:357149030,data:[{id:2807729,data:1e6},{id:19840,data:"webm-writer-js"},{id:22337,data:"webm-writer-js"},w]},n={id:374648427,data:[{id:174,data:[{id:215,data:1},{id:29637,data:1},{id:156,data:0},{id:2274716,data:"und"},{id:134,data:"V_VP8"},{id:2459272,data:"VP8"},{id:131,data:1},{id:224,data:[{id:176,data:s},{id:186,data:c}]}]}]};h={id:408125543,size:-1,data:[f,e,n]};var i=new t(256);o(i,b.pos,[{id:440786851,data:[{id:17030,data:1},{id:17143,data:1},{id:17138,data:4},{id:17139,data:8},{id:17026,data:"webm"},{id:17031,data:2},{id:17029,data:2}]},h]),b.write(i.getAsDataArray()),m.SegmentInfo.positionEBML.data=y(e.offset),m.Tracks.positionEBML.data=y(n.offset)}function E(e){var n=new t(4);if(!(e.trackNumber>0&&e.trackNumber<127))throw"TrackNumber must be > 0 and < 127";return n.writeEBMLVarInt(e.trackNumber),n.writeU16BE(e.timecode),n.writeByte(128),{id:163,data:[n.getAsDataArray(),e.frame]}}function k(){if(0!=u.length){for(var e=0,n=0;n<u.length;n++)e+=u[n].frame.length;var i,r,a,s=new t(e+32*u.length),c=function(t){return{id:524531317,data:[{id:231,data:Math.round(t.timecode)}]}}({timecode:Math.round(l)});for(n=0;n<u.length;n++)c.data.push(E(u[n]));o(s,b.pos,c),b.write(s.getAsDataArray()),i=1,r=Math.round(l),a=c.offset,g.push({id:187,data:[{id:179,data:r},{id:183,data:[{id:247,data:i},{id:241,data:y(a)}]}]}),u=[],l+=p,p=0}}this.addFrame=function(t){if(d){if(t.width!=s||t.height!=c)throw"Frame size differs from previous frames"}else s=t.width,c=t.height,v(),d=!0;var e,a=n(t,{quality:r.quality});if(!a)throw"Couldn't decode WebP frame, does the browser support WebP?";(e={frame:i(a),duration:r.frameDuration}).trackNumber=1,e.timecode=Math.round(p),u.push(e),(p+=e.duration)>=5e3&&k()},this.complete=function(){return k(),function(){var e={id:475249515,data:g},n=new t(16+32*g.length);o(n,b.pos,e),b.write(n.getAsDataArray()),m.Cues.positionEBML.data=y(e.offset)}(),function(){var e=new t(f.size),n=b.pos;o(e,f.dataOffset,f.data),b.seek(f.dataOffset),b.write(e.getAsDataArray()),b.seek(n)}(),function(){var e=new t(8),n=b.pos;e.writeDoubleBE(l),b.seek(w.dataOffset),b.write(e.getAsDataArray()),b.seek(n)}(),b.complete("video/webm")},this.getWrittenSize=function(){return b.length},r=function(t,e){var n={};return[t,e].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})),n}({quality:.95,fileWriter:null,fd:null,frameDuration:null,frameRate:null},r||{}),function(){if(!r.frameDuration){if(!r.frameRate)throw"Missing required frameDuration or frameRate setting";r.frameDuration=1e3/r.frameRate}}()}};i?t.exports=s(r,o):window.WebMWriter=s(r,o)}()}).call(this,n(204).Buffer)}}]);
//# sourceMappingURL=9.fcff3309.chunk.js.map