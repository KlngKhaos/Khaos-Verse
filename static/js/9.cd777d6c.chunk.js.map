{"version":3,"sources":["views/PoolTour3D/components/THREE/Model/index.tsx","config/constants/arenas/arenas.ts","views/MyGladiators/components/SelectArena.tsx","views/MyGladiators/components/SelectArenaModal.tsx","views/MyGladiators/components/Viewer.tsx","views/PoolTour3D/store/index.js","views/Configurator/utils/constant.ts","views/Configurator/components/UI/Loader/index.tsx","components/Modal/Spacer.tsx","components/Modal/ModalActions.tsx","components/Modal/ModalInput.tsx","views/Configurator/components/THREE/Controls/index.tsx","../node_modules/three/examples/jsm/controls/OrbitControls.js"],"names":["Model","props","data","setModel","setCurName","curSpeed","nodes","colors","animations","nft","position","group","useRef","actions","useState","THREE","mixer","showStatics","useStore","state","currentStatics","updateShowStatics","updateCurrentStatics","currentHoverModel","updateCurrentHoverModel","useEffect","current","length","idle","clipAction","glTFAnimationIndex","play","forEach","clip","uncacheClip","useFrame","_","delta","update","positionX","x","positionY","y","positionZ","z","scaleX","glTFScale","scaleY","scaleZ","rotationX","glTFRotation","Math","PI","rotationY","rotationZ","setModelStatics","temp","model","isSelected","hash","ref","dispose","scale","rotation","glTFRootNode","object","Object","keys","map","name","isSkinnedMesh","castShadow","geometry","material","skeleton","morphTargetDictionary","morphTargetInfluences","onClick","e","stopPropagation","onPointerMove","onPointerOut","uuid","isMesh","Arena","terrain","factor","incentivesToBattles","imagePath","StyledBackSelector","styled","div","ArenaImage","SelectArena","arenas","t","useTranslation","arena","src","alt","textAlign","NewModal","Modal","ActionButtons","ModalActions","SelectArenaModal","onDismiss","title","minWidth","justifyContent","variant","style","marginTop","width","height","href","backgroundColor","color","borderColor","StyledViewer","StyledCanvasWrapper","isStaticsPaneOpen","StyledArrowButton","button","StyledModelOptionsWrapper","StyledModelName","StyledButtonsWrapper","StyledOptionButton","Button","background","show","Viewer","setColor","curName","curBack","nftHash","useToast","toastError","toastSuccess","setShow","battleBtn","statsBtn","sellBtn","gladiatorBtns","myData","setMyData","useModal","usersGladiators","myModels","setMyModels","currentPage","setCurrentPage","history","useHistory","i","useLoader","GLTFLoader","glTFPath","handleShowPanel","Dome","texture","attach","args","side","GroundPlane","wrapS","wrapT","repeat","set","anisotropy","receiveShadow","getCurrentModels","slice","ButtonGroup","prev","ceil","left","right","ModelOptions","tokenId","disabled","push","pathname","to","camera","fov","cameraProps","shadows","intensity","ambientLightProps","pointLightProps","decay","shadowMapSize","Controls","maxPolarAngle","minPolarAngle","controlsProps","maxDistance","minDistance","target","enableKeys","fallback","Loader","item","index","glTFPosition","PageLoader","useCountStore","create","get","value","myGladiators","setMyGladiators","schoolGladiators","setSchoolGladiators","setUsersGladiators","userNftHashes","settingUserNFTHashes","schoolNftHashes","settingSchoolNFTHashes","nftHashes","settingNFTHashes","totalSupplies","setTotalSupplies","BackPaths","cx","cy","fill","stroke","strokeWidth","r","strokeDasharray","attributeName","type","repeatCount","dur","values","keyTimes","StyledSpacer","size","Spacer","s","spacing","useContext","ThemeContext","StyledModalActions","theme","primaryDark","StyledModalAction","children","l","React","Children","toArray","child","StyledTokenInput","input","isWarning","warning","inset","text","StyledInput","Input","mediaQueries","xs","sm","StyledErrorMessage","Text","ModalInput","max","symbol","onChange","onSelectMax","addLiquidityUrl","inputTitle","decimals","isBalanceZero","pl","fontSize","balance","balanceUnits","parseUnits","formatBigNumber","displayBalance","alignItems","pattern","inputMode","step","min","placeholder","mr","bold","external","extend","OrbitControls","useThree","gl","invalidate","undefined","addEventListener","domElement","_changeEvent","_startEvent","_endEvent","console","warn","document","error","touchAction","enabled","Vector3","Infinity","minZoom","maxZoom","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","getDistance","this","distanceTo","listenToKeyEvents","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","isFinite","makeSafe","radius","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","zoomChanged","distanceToSquared","EPS","dot","quaternion","removeEventListener","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","clientHeight","matrix","isOrthographicCamera","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","getSecondPointerPosition","subVectors","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","addPointer","pointerType","trackPointer","DOLLY_ROTATE","onTouchStart","mouseAction","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","preventDefault","handleMouseWheel","needsUpdate","code","handleKeyDown","splice","pointer","passive","EventDispatcher"],"mappings":"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","file":"static/js/9.cd777d6c.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { MeshProps, useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport useStore from '../../../store';\n\ninterface ModelProps extends MeshProps {\n  data: {\n    setModel: (model: any) => void;\n    setColor: (col: any) => void;\n    setCurName: (name: any) => void;\n    curSpeed: any;\n    nodes: any;\n    colors: any;\n    animations: any;\n    nft?: any;\n    position: any;\n  };\n}\n\ninterface actions {\n  current: {\n    idle: {\n      play: () => void,\n    };\n  };\n}\n\nconst Model: (props: ModelProps) => JSX.Element | null = (props) => {\n  const {\n    data: { setModel, setCurName, curSpeed, nodes, colors, animations, nft, position },\n  } = props;\n  const group = useRef()\n\n  const actions: actions = useRef();\n\n  const [mixer] = useState(() => new THREE.AnimationMixer(group));\n\n  const showStatics = useStore(state => state.showStatics);\n  const updateShowStatics = useStore(state => state.updateShowStatics);\n  const currentStatics = useStore(state => state.currentStatics);\n  const updateCurrentStatics = useStore(state => state.updateCurrentStatics);\n  const currentHoverModel = useStore(state => state.currentHoverModel);\n  const updateCurrentHoverModel = useStore(state => state.updateCurrentHoverModel);\n\n  useEffect(() => {\n    setModel({ 'scene': group.current });\n  }, [setModel]);\n\n  useEffect(() => {\n    if (animations.length) {\n      actions.current = {\n        idle: mixer.clipAction(animations[nft.glTFAnimationIndex || 0], group.current),\n      };\n      actions.current.idle.play();\n    }\n\n    return () => animations.forEach((clip) => mixer.uncacheClip(clip))\n\n  }, [animations, mixer]);\n\n  useFrame((_, delta) => mixer.update(delta * curSpeed));\n  const positionX = position?.x || 0;\n  const positionY = position?.y || 0;\n  const positionZ = position?.z || 0;\n\n  const scaleX = nft.glTFScale?.x || 1;\n  const scaleY = nft.glTFScale?.y || 1;\n  const scaleZ = nft.glTFScale?.z || 1;\n\n  const rotationX = nft.glTFRotation?.x || -Math.PI / 2;\n  const rotationY = nft.glTFRotation?.y || 0;\n  const rotationZ = nft.glTFRotation?.z || 0;\n\n  const setModelStatics = () => {\n    const temp = { ...nft };\n    delete temp.model;\n    updateCurrentStatics(temp);\n  }\n  const isSelected = () => (!showStatics && !currentHoverModel) || currentHoverModel?.hash === nft.hash || nft.hash === currentStatics?.hash;\n\n  return (\n    <group position={[positionX, positionY, positionZ]}>\n      <group ref={group} dispose={null} scale={[scaleX, scaleY, scaleZ]}>\n        <group rotation={[rotationX, rotationY, rotationZ]}>\n          <group >\n            {nodes[nft.glTFRootNode || 'Armature_rootJoint'] ?\n              <primitive object={nodes[nft.glTFRootNode || 'Armature_rootJoint']} /> : null\n            }\n            {\n              Object.keys(nodes).map((name) => {\n                return nodes[name].isSkinnedMesh ? (\n                  <skinnedMesh\n                    castShadow\n                    key={nodes[name].uuid}\n                    geometry={nodes[name].geometry}\n                    material={nodes[name].material}\n                    skeleton={nodes[name].skeleton}\n                    morphTargetDictionary={nodes[name].morphTargetDictionary}\n                    morphTargetInfluences={nodes[name].morphTargetInfluences}\n                    material-color={isSelected() ? (colors[name] ? colors[name] : '#ffffff') : '#111111'}\n                    onClick={(e) => { setCurName(name); setModelStatics(); e.stopPropagation(); }}\n                    onPointerMove={() => updateCurrentHoverModel(nft)}\n                    onPointerOut={() => updateCurrentHoverModel(null)}\n                  />\n                ) : nodes[name].isMesh ? (\n                  <mesh\n                    castShadow\n                    key={nodes[name].uuid}\n                    material={nodes[name].material}\n                    material-color={isSelected() ? (colors[name] ? colors[name] : '#ffffff') : '#111111'}\n                    morphTargetDictionary={nodes[name].morphTargetDictionary}\n                    morphTargetInfluences={nodes[name].morphTargetInfluences}\n                    onClick={(e) => { setCurName(name); setModelStatics(); e.stopPropagation() }}\n                    onPointerMove={() => updateCurrentHoverModel(nft)}\n                    onPointerOut={() => updateCurrentHoverModel(null)}\n                  />\n                ) : null;\n              })\n            }\n          </group>\n        </group>\n      </group>\n    </group>\n  );\n};\n\nexport default Model;","import { Arenas } from './types'\n\n\nconst Arena: Arenas[] = [\n    {\n        name: \"Coliseum\",\n        terrain: \"Desert\",\n        factor: 22,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/coliseum.jpg\"\n    },\n    {\n        name: \"Britannica\",\n        terrain: \"Mountain\",\n        factor: 14,\n        incentivesToBattles: 10,\n        imagePath: \"images/arenas/britannica.jpg\"\n    },\n    {\n        name: \"Nimes Amphitheatre\",\n        terrain: \"Desert\",\n        factor: 16,\n        incentivesToBattles: 10,\n        imagePath: \"images/arenas/nimes-amphitheatre.jpg\"\n    },\n    {\n        name: \"Arles Arena\",\n        terrain: \"Mountain\",\n        factor: 12,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/arles.jpg\"\n    },\n    {\n        name: \"Lyon\",\n        terrain: \"Tropical\",\n        factor: 6,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/lyon.jpg\"\n    },\n    {\n        name: \"Bucha\",\n        terrain: \"Polar/Glacial\",\n        factor: 12,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/bucha.jpg\"\n    },\n    {\n        name: \"Pula\",\n        terrain: \"Tropical\",\n        factor: 8,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/pula.jpg\"\n    },\n    {\n        name: \"Lillebonne\",\n        terrain: \"Tropical\",\n        factor: 3,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/lillebonne.jpg\"\n    },\n    {\n        name: \"Verona\",\n        terrain: \"Polar/Glacial\",\n        factor: 19,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/verona.jpg\"\n    },\n    {\n        name: \"Vodnjan\",\n        terrain: \"Desert\",\n        factor: 19,\n        incentivesToBattles: 100,\n        imagePath: \"images/arenas/vodnjan.jpg\"\n    },\n    {\n        name: \"Matia Piso\",\n        terrain: \"Polar/Glacial\",\n        factor: 19,\n        incentivesToBattles: 1000,\n        imagePath: \"images/arenas/matiapiso.jpg\"\n    },\n    {\n        name: \"Ateia Trebellia\",\n        terrain: \"Mountain\",\n        factor: 19,\n        incentivesToBattles: 1000,\n        imagePath: \"images/arenas/ateiatrebellia.jpg\"\n    }\n]\n\nexport default Arena","import React from 'react'\nimport styled from 'styled-components'\nimport { Heading, Text } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { Arenas } from 'config/constants/arenas/types'\n\n\nconst StyledBackSelector = styled.div`\n        width: 100%;\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n        justify-content: space-between;\n        text-align: center;\n\n        @media (min-width: 320px) and (max-width: 480px) {\n            padding: 0;\n          }\n    \n        @media (min-width: 480px) and (max-width: 786px) {\n            \n          }\n    `\nconst ArenaImage = styled.div`\n    display: flex;\n    flex-direction: column;\n    margin-top: 20px;\n    border: 2px solid black;\n    border-radius: 10px;\n    padding: 5px;\n    & img {\n        width: 200px !important;\n        height: 150px !important;\n        border-radius: 10px;\n    }\n\n    &:hover {\n        cursor: pointer;\n        border: 2px solid #D9AB3A;\n    }\n`\n\ninterface SelectArenaProps {\n    arenas: Arenas[],\n}\n\nconst SelectArena: React.FC<SelectArenaProps> = ({ arenas }) => {\n    const { t } = useTranslation()\n\n    return (\n        <StyledBackSelector>\n            {\n                arenas.map((arena) => (\n                    <>\n                        <ArenaImage>\n                            <img src={arena.imagePath} alt={arena.name} />\n                            <Heading textAlign=\"left\">{t(`${arena.name}`)}</Heading>\n                            <Text textAlign=\"left\">{t(`${arena.terrain}`)}</Text>\n                        </ArenaImage>\n                    </>\n                ))\n            }\n        </StyledBackSelector >\n    )\n}\n\nexport default SelectArena","import React, { useState, useEffect } from 'react'\nimport { Link } from \"react-router-dom\";\nimport { Modal, Flex, Button } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport styled from 'styled-components'\nimport { ModalActions } from 'components/Modal'\nimport Arena from 'config/constants/arenas/arenas'\nimport SelectArena from './SelectArena'\n\ninterface SelectArenaModalProps {\n    onDismiss?: () => void\n}\n\nconst NewModal = styled(Modal)`\n    width: 1120px !important;\n`\n\nconst ActionButtons = styled(ModalActions)`\n    padding-bottom: 0 !important;\n`\n\n\nconst SelectArenaModal: React.FC<SelectArenaModalProps> = ({ onDismiss }) => {\n\n    const { t } = useTranslation()\n\n    return (\n        <NewModal title=\"Select Arena for Staking\" onDismiss={onDismiss} minWidth=\"800px\">\n            <SelectArena arenas={Arena} />\n            <ActionButtons>\n                <Flex justifyContent=\"end\">\n                    <Button variant=\"secondary\" scale=\"sm\" style={{ marginTop: '10px' }} onClick={onDismiss}>\n                        {t('Cancel')}\n                    </Button>\n                    <div style={{ width: '24px', height: '24px' }}>{ }</div>\n                    <a href=\"/stakegladiator\">\n                        <Button\n                            variant=\"secondary\"\n                            scale=\"sm\"\n                            style={{ marginTop: '10px', backgroundColor: 'green', color: 'white', borderColor: 'green' }}\n                        >\n                            {t('Stake')}\n                        </Button>\n                    </a>\n                </Flex>\n            </ActionButtons>\n        </NewModal>\n    )\n}\n\nexport default SelectArenaModal","import React, { Suspense, useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { Canvas, useLoader } from '@react-three/fiber'\nimport { Button, Modal, AutoRenewIcon, Flex, useModal } from '@pancakeswap/uikit'\nimport { ModalActions } from 'components/Modal'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'\nimport * as THREE from 'three'\nimport styled from 'styled-components'\nimport { ambientLightProps, cameraProps, controlsProps, pointLightProps } from 'views/Configurator/utils/constant'\n\nimport Controls from '../../Configurator/components/THREE/Controls'\nimport Model from '../../PoolTour3D/components/THREE/Model'\nimport Loader from '../../Configurator/components/UI/Loader'\nimport axios from 'axios'\nimport { merge } from 'lodash'\n\nimport useStore from '../../PoolTour3D/store'\nimport { useHistory } from 'react-router-dom'\nimport { getAllGladiators } from '../../../state/nftMarket/helpers'\nimport PageLoader from 'components/Loader/PageLoader'\nimport SelectArenaModal from './SelectArenaModal'\nimport Statics from '../../../views/PoolTour3D/components/UI/Statics'\nimport useToast from 'hooks/useToast'\n\nconst StyledViewer = styled.div`\n  width: 100%;\n  height: 100%;\n  text-align: center;\n`\nconst StaticsPane = styled.div<{ isStaticsPaneOpen: boolean }>`\n  flex: none;\n  overflow: hidden;\n  transition: width 200ms ease-in-out;\n  width: ${({ isStaticsPaneOpen }) => (isStaticsPaneOpen ? '384px' : 0)};\n  position: absolute;\n  right: 0;\n`\n\nconst StyledCanvasWrapper = styled.div`\n  height: calc(100vh - 80px);\n  position: relative;\n`\n\nconst StyledArrowButton = styled.button`\n  position: absolute;\n  background: url(/images/battles/back.png);\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: unset;\n  border: unset;\n  width: 170px;\n  height: 39px;\n  color: white;\n  top: 50%;\n  left: 10%;\n  font-size: 20px;\n  font-weight: 600;\n\n  @media (min-width: 320px) and (max-width: 480px) {\n    width: 100px;\n    height: 22px;\n    font-size: 14px;\n  }\n\n  &:hover {\n    opacity: 0.8;\n    cursor: pointer;\n  }\n`\n\nconst StyledModelOptionsWrapper = styled.div`\n  position: absolute;\n  transform: translate3d(-50%, 0, 0);\n  left: 50%;\n  bottom: 0;\n  width: 40vw;\n  height: 7vw;\n  background-color: #121212;\n  margin-left: auto;\n  margin-right: auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 0.5vw;\n  border-top-left-radius: 0.5vw;\n  border-top-right-radius: 0.5vw;\n`\n\nconst StyledModelName = styled.div`\n  color: white;\n  font-size: 25px;\n`\n\nconst StyledButtonsWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n`\n\nconst StyledOptionButton = styled(Button) <{ background?: string, show: boolean }>`\n  background-size: contain;\n  background-repeat: no-repeat;\n  outline: unset;\n  border: unset;\n  width: 9vw;\n  height: 3vw;\n  color: rgb(85, 34, 22);\n  font-size: 20px;\n  background: url(${({ background }) => background});\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center center;\n  outline: unset;\n  border: unset;\n  width: 9vw;\n  height: 3vw;\n  padding: 5px 0px;\n  color: rgb(85, 34, 22);\n  font-size: 20px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: ${({ show }) => (show ? '1' : '0.5')};\n`\n\ntype ChildProps = {\n  curColor: string\n  setColor: (arg0: string) => void\n  curName: string\n  setCurName: (arg0: string) => void\n  curSpeed: any\n  curBack: any\n  colors: any\n  nftHash?: any | []\n}\n\nconst loadJSON = (path, hash) => {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          const data = JSON.parse(xhr.responseText)\n          resolve({ ...data, hash })\n        } else {\n          reject(xhr)\n        }\n      }\n    }\n    xhr.open('GET', path, true)\n    xhr.send()\n  })\n}\n\n// TOOD: Get my nft hash values\n// const nftHashs = localStorage.getItem('myNfts') ? JSON.parse( localStorage.getItem('myNfts') ): [];\n\n// var myData;\n\n// Promise.all( nftHashs.map(hash => loadJSON( `https://gateway.pinata.cloud/ipfs/${ hash }`, hash )) ).then(data => {\n//     myData = data;\n// });\n\nconst Viewer: React.FC<ChildProps> = ({ setColor, curName, setCurName, curSpeed, curBack, colors, nftHash }) => {\n  const { toastError, toastSuccess } = useToast()\n  const [show, setShow] = useState(false)\n\n  const [gladiatorBtns, setgladiatorBtns] = useState({\n    // battleBtn: true,\n    // statsBtn: true,\n    // sellBtn: true,\n    battleBtn: false,\n    statsBtn: false,\n    sellBtn: false,\n  })\n\n  const { battleBtn, statsBtn, sellBtn } = gladiatorBtns\n  const [myData, setMyData] = useState<any | []>([])\n  const [onStakeInArena] = useModal(<SelectArenaModal />)\n\n  const { usersGladiators, updateShowStatics } = useStore((state) => state)\n  // console.log(\"usersGladiators\", usersGladiators)\n\n  useEffect(() => {\n    if (usersGladiators) {\n      setMyData(usersGladiators)\n    }\n  }, [usersGladiators])\n\n  useEffect(() => {\n    if (usersGladiators?.length === 0) {\n      toastError('No gladiator is found or bought')\n    }\n  }, [usersGladiators])\n\n  const [myModels, setMyModels] = useState([])\n  const [currentPage, setCurrentPage] = useState(0)\n  const currentStatics = useStore((state) => state.currentStatics)\n  const currentHoverModel = useStore((state) => state.currentHoverModel)\n  const history = useHistory()\n\n  if (myData && myData.length > 0 && !myModels.length) {\n    // console.log(\"myDataaaaaaaaaaaaaaaa\", myData)\n    for (let i = 0; i < myData.length; i++) {\n      // if(myData[i].attributes && myData[i].attributes[0]) {\n      //     merge(myData[i], myData[i].attributes[0])\n      //     merge(myData[i], models.filter((nft) => nft.glTF === myData[i].glTF)[0])\n      // }\n      myData[i].model = useLoader(GLTFLoader, myData[i].glTFPath)\n    }\n    setMyModels(myData)\n  }\n\n  const handleShowPanel = () => {\n    if (currentStatics) {\n      updateShowStatics(true)\n    }\n  }\n  const Dome = () => {\n    const texture = useLoader(THREE.TextureLoader, `/images/gallery/arena3.jpg`)\n    return (\n      <mesh>\n        <sphereBufferGeometry attach=\"geometry\" args={[50, 100, 100]} />\n        <meshBasicMaterial attach=\"material\" map={texture} side={THREE.BackSide} />\n      </mesh>\n    )\n  }\n\n  const GroundPlane = () => {\n    const texture = useLoader(THREE.TextureLoader, '/images/gallery/textures/1.jpg')\n    texture.wrapS = THREE.RepeatWrapping\n    texture.wrapT = THREE.RepeatWrapping\n    texture.repeat.set(64, 64)\n    texture.anisotropy = 16\n\n    return (\n      <mesh receiveShadow rotation={[Math.PI / 2, 0, 0]} position={[0, -4, 0]}>\n        <planeBufferGeometry attach=\"geometry\" args={[500, 500]} />\n        <meshPhongMaterial attach=\"material\" map={texture} side={THREE.DoubleSide} />\n      </mesh>\n    )\n  }\n\n  const goPrevPage = () => {\n    if (currentPage <= 0) return\n\n    setCurrentPage((prev) => prev - 1)\n  }\n\n  const goNextPage = () => {\n    if (currentPage >= Math.ceil(myModels.length / 3) - 1) return\n\n    setCurrentPage((prev) => prev + 1)\n  }\n\n  const getCurrentModels = () => {\n    return myModels.slice(currentPage * 3, currentPage * 3 + 3)\n  }\n\n  const ButtonGroup = () => {\n    return (\n      <div>\n        {!(currentPage <= 0) && <StyledArrowButton onClick={() => goPrevPage()}>Previous</StyledArrowButton>}\n        {!(currentPage >= Math.ceil(myModels.length / 3) - 1) && (\n          <StyledArrowButton onClick={() => goNextPage()} style={{ left: 'unset', right: '10%' }}>\n            Next\n          </StyledArrowButton>\n        )}\n      </div>\n    )\n  }\n\n  const ModelOptions = () => {\n    let showStatics = useStore((state) => state.showStatics)\n\n    const goToBattle = () => {\n      if (currentStatics?.name) {\n        history.push({\n          pathname: '/battles/join',\n          state: {\n            nft: currentStatics,\n          },\n        })\n      }\n    }\n\n    const showStats = () => {\n      // console.log('workinggggggggggggggggggg')\n      showStatics = true\n      // console.log(showStatics)\n\n      return <></>\n    }\n    return (\n      <>\n        {usersGladiators?.length != 0 && (\n          <StyledModelOptionsWrapper>\n            <StyledModelName>\n              {currentHoverModel\n                ? currentHoverModel.name\n                : currentStatics?.name\n                  ? currentStatics.name\n                  : 'None selected'}\n            </StyledModelName>\n\n            <StyledModelName>\n              {currentHoverModel\n                ? `Token ID: ${currentHoverModel.tokenId}`\n                : currentStatics?.tokenId\n                  ? `Token ID: ${currentStatics.tokenId}`\n                  : ''}\n            </StyledModelName>\n            {currentStatics?.tokenId && setShow(true)}\n            {usersGladiators?.length != 0 && (\n              <StyledButtonsWrapper>\n                <StyledOptionButton\n                  disabled={battleBtn}\n                  background={'/images/battles/red.png'}\n                  onClick={() => goToBattle()}\n                  show={show}\n                >\n                  Go to Battle\n                </StyledOptionButton>\n                <Link\n                  to={{\n                    pathname: '/room/pools',\n                    state: { currentStatics },\n                  }}\n                >\n                  <StyledOptionButton background={'/images/battles/blue.png'} show={show}>Stake in Pools</StyledOptionButton>\n                </Link>\n                <StyledOptionButton\n                  onClick={handleShowPanel}\n                  background={'/images/battles/blue.png'}\n                  show={show} >Statistics</StyledOptionButton>\n                <Link to=\"nfts\">\n                  <StyledOptionButton disabled={sellBtn} background={'/images/battles/blue.png'} show={show}>\n                    Sell\n                  </StyledOptionButton>\n                </Link>\n              </StyledButtonsWrapper>\n            )}\n          </StyledModelOptionsWrapper>\n        )}\n      </>\n    )\n  }\n\n  return (\n    <>\n      {usersGladiators ? (\n        <StyledViewer>\n          <StyledCanvasWrapper>\n            <Canvas camera={{ fov: cameraProps.fov, position: cameraProps.position }} shadows>\n              <fog attach=\"fog\" args={['white', 90, 150]} />\n              <ambientLight intensity={ambientLightProps.intensity} />\n              <pointLight\n                position={pointLightProps.position}\n                castShadow\n                decay={pointLightProps.decay}\n                shadow-mapSize-height={pointLightProps.shadowMapSize}\n                shadow-mapSize-width={pointLightProps.shadowMapSize}\n              />\n              <Controls\n                maxPolarAngle={Math.PI / 2}\n                minPolarAngle={controlsProps.minPolarAngle}\n                maxDistance={controlsProps.maxDistance}\n                minDistance={controlsProps.minDistance}\n                target={controlsProps.target}\n                enableKeys\n              />\n              <Dome />\n              <GroundPlane />\n              <Suspense fallback={<Loader />}>\n                {getCurrentModels().map((item, index) => (\n                  <Model\n                    key={item.name + index}\n                    data={{\n                      setModel: () => true,\n                      setColor: () => true,\n                      setCurName: setCurName,\n                      curSpeed: curSpeed,\n                      animations: item.model.animations,\n                      nodes: item.model.nodes,\n                      colors: item.colors ? item.colors : colors,\n                      nft: item,\n                      position: {\n                        ...item.glTFPosition,\n                        z: item.glTFPosition.z + 6 * index - 2 * getCurrentModels().length,\n                      },\n                    }}\n                  />\n                ))}\n              </Suspense>\n            </Canvas>\n\n            <ButtonGroup />\n\n            <ModelOptions />\n          </StyledCanvasWrapper>\n        </StyledViewer>\n      ) : (\n        <PageLoader />\n      )}\n    </>\n  )\n}\n\nexport default Viewer\n","import create from 'zustand';\n\nexport const useCountStore = create((set, get) => ({\n\tshowStatics: false,\n\tupdateShowStatics: ( value ) => {\n\t\tset({ showStatics: value });\n\t},\n\tcurrentStatics: null,\n\tupdateCurrentStatics: (value) => {\n\t\tset({ currentStatics: value });\n\t},\n\tcurrentHoverModel: null,\n\tupdateCurrentHoverModel: (value) => {\n\t\tset({ currentHoverModel: value });\n\t},\n\tmyGladiators: null,\n\tsetMyGladiators: data => {\n\t\tset({myGladiators: data})\n\t},\n\tschoolGladiators: null,\n\tsetSchoolGladiators: data => {\n\t\tset({schoolGladiators: data})\n\t},\n\tusersGladiators: null,\n\tsetUsersGladiators: data => {\n\t\tset({usersGladiators: data})\n\t},\n\tuserNftHashes: [],\n\tsettingUserNFTHashes: data => {\n\t\tset({userNftHashes: data})\n\t},\n\tschoolNftHashes: [],\n\tsettingSchoolNFTHashes: data => {\n\t\tset({schoolNftHashes: data})\n\t},\n\tnftHashes: [],\n\tsettingNFTHashes: data => {\n\t\tset({nftHashes: data})\n\t},\n\ttotalSupplies: 0,\n\tsetTotalSupplies: data => {\n\t\tset({totalSupplies: data})\n\t}\n}))\n\nexport default useCountStore;","export const ambientLightProps = { intensity: 0.55 };\nexport const cameraProps = { fov: 20, position: [40, 0, 0] };\nexport const pixelRatio = 1;\nexport const pointLightProps = { decay: 2, position: [10, 20, 15], shadowMapSize: 512 };\n\nexport const controlsProps = { maxPolarAngle: 2 *Math.PI, minPolarAngle: 0, target: [0, 0, 0], maxDistance: 130, minDistance: 10 };\n\nexport const modelProps = { position: [0, 1, 8] };\n\nexport const groundProps = { posiiton: [0, 0, 0], rotation: [-Math.PI / 2, 0, 0] };\n\nexport const BackPaths = [\n    \"/images/gallery/arena1.jpg\",\n    \"/images/gallery/arena2.jpg\",\n    \"/images/gallery/arena3.jpg\"\n];","import React from 'react';\nimport { Html } from '@react-three/drei';\n\nconst Loader: () => JSX.Element = () => (\n  <Html>\n    <svg width='100' height='100'>\n      <circle\n        cx='50'\n        cy='50'\n        fill='none'\n        stroke='#262323'\n        strokeWidth='5'\n        r='40'\n        strokeDasharray='164.93361431346415 56.97787143782138'\n      >\n        <animateTransform\n          attributeName='transform'\n          type='rotate'\n          repeatCount='indefinite'\n          dur='1s'\n          values='0 50 50;360 50 50'\n          keyTimes='0;1'\n        />\n      </circle>\n    </svg>\n  </Html>\n);\n\nexport default Loader;\n","import React, { useContext } from 'react'\nimport styled, { ThemeContext } from 'styled-components'\n\ninterface SpacerProps {\n  size?: 'sm' | 'md' | 'lg'\n}\n\nconst Spacer: React.FC<SpacerProps> = ({ size = 'md' }) => {\n  const { spacing } = useContext(ThemeContext)\n\n  let s: number\n  switch (size) {\n    case 'lg':\n      s = spacing[6]\n      break\n    case 'sm':\n      s = spacing[2]\n      break\n    case 'md':\n    default:\n      s = spacing[4]\n  }\n\n  return <StyledSpacer size={s} />\n}\n\ninterface StyledSpacerProps {\n  size: number\n}\n\nconst StyledSpacer = styled.div<StyledSpacerProps>`\n  height: ${(props) => props.size}px;\n  width: ${(props) => props.size}px;\n`\n\nexport default Spacer\n","import React from 'react'\nimport styled from 'styled-components'\nimport Spacer from './Spacer'\n\nconst ModalActions: React.FC = ({ children }) => {\n  const l = React.Children.toArray(children).length\n  return (\n    <StyledModalActions>\n      {React.Children.map(children, (child, i) => (\n        <>\n          <StyledModalAction>{child}</StyledModalAction>\n          {i < l - 1 && <Spacer />}\n        </>\n      ))}\n    </StyledModalActions>\n  )\n}\n\nconst StyledModalActions = styled.div`\n  align-items: center;\n  background-color: ${(props) => props.theme.colors.primaryDark}00;\n  display: flex;\n  margin: 0;\n  padding: ${(props) => props.theme.spacing[4]}px 0;\n\n  @media (min-width: 320px) and (max-width: 480px) {\n    display: flex;\n    flex-direction: column !important;\n  }\n  @media (min-width: 480px) and (max-width: 786px) {\n    display: flex;\n    flex-direction: column !important;\n  }\n  @media (min-width: 786px) and (max-width: 1224px) {\n    display: flex;\n    flex-direction: column !important;\n  }\n`\n\nconst StyledModalAction = styled.div`\n  flex: 1;\n  width: 100%;\n`\n\nexport default ModalActions\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Text, Button, Input, InputProps, Flex, Link } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { parseUnits } from 'ethers/lib/utils'\nimport { formatBigNumber } from 'utils/formatBalance'\n\ninterface ModalInputProps {\n  max: string\n  symbol: string\n  onSelectMax?: () => void\n  onChange: (e: React.FormEvent<HTMLInputElement>) => void\n  placeholder?: string\n  value: string\n  addLiquidityUrl?: string\n  inputTitle?: string\n  decimals?: number\n}\n\nconst getBoxShadow = ({ isWarning = false, theme }) => {\n  if (isWarning) {\n    return theme.shadows.warning\n  }\n\n  return theme.shadows.inset\n}\n\nconst StyledTokenInput = styled.div<InputProps>`\n  display: flex;\n  flex-direction: column;\n  background-color: ${({ theme }) => theme.colors.input};\n  border-radius: 16px;\n  box-shadow: ${getBoxShadow};\n  color: ${({ theme }) => theme.colors.text};\n  padding: 8px 16px 8px 0;\n  width: 100%;\n`\n\nconst StyledInput = styled(Input)`\n  box-shadow: none;\n  width: 60px;\n  margin: 0 8px;\n  padding: 0 8px;\n  border: none;\n\n  ${({ theme }) => theme.mediaQueries.xs} {\n    width: 80px;\n  }\n\n  ${({ theme }) => theme.mediaQueries.sm} {\n    width: auto;\n  }\n`\n\nconst StyledErrorMessage = styled(Text)`\n  position: absolute;\n  bottom: -22px;\n  a {\n    display: inline;\n  }\n`\n\nconst ModalInput: React.FC<ModalInputProps> = ({\n  max,\n  symbol,\n  onChange,\n  onSelectMax,\n  value,\n  addLiquidityUrl,\n  inputTitle,\n  decimals = 18,\n}) => {\n  const { t } = useTranslation()\n  const isBalanceZero = max === '0' || !max\n\n  const displayBalance = (balance: string) => {\n    if (isBalanceZero) {\n      return '0'\n    }\n\n    const balanceUnits = parseUnits(balance, decimals)\n    return formatBigNumber(balanceUnits, decimals, decimals)\n  }\n\n  return (\n    <div style={{ position: 'relative' }}>\n      <StyledTokenInput isWarning={isBalanceZero}>\n        <Flex justifyContent=\"space-between\" pl=\"16px\">\n          <Text fontSize=\"14px\">{inputTitle}</Text>\n          <Text fontSize=\"14px\">{t('Balance: %balance%', { balance: displayBalance(max) })}</Text>\n        </Flex>\n        <Flex alignItems=\"flex-end\" justifyContent=\"space-around\">\n          <StyledInput\n            pattern={`^[0-9]*[.,]?[0-9]{0,${decimals}}$`}\n            inputMode=\"decimal\"\n            step=\"any\"\n            min=\"0\"\n            onChange={onChange}\n            placeholder=\"0\"\n            value={value}\n          />\n          <Button scale=\"sm\" onClick={onSelectMax} mr=\"8px\">\n            {t('Max')}\n          </Button>\n          <Text fontSize=\"16px\">{symbol}</Text>\n        </Flex>\n      </StyledTokenInput>\n      {isBalanceZero && (\n        <StyledErrorMessage fontSize=\"14px\" color=\"failure\">\n          {t('No tokens to stake')}:{' '}\n          <Link fontSize=\"14px\" bold={false} href={addLiquidityUrl} external color=\"failure\">\n            {t('Get %symbol%', { symbol })}\n          </Link>\n        </StyledErrorMessage>\n      )}\n    </div>\n  )\n}\n\nexport default ModalInput\n","import React, { useEffect, useRef } from 'react';\nimport { extend, useThree, ReactThreeFiber } from '@react-three/fiber';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-namespace\n  namespace JSX {\n    interface IntrinsicElements {\n      orbitControls: ReactThreeFiber.Object3DNode<\n        OrbitControls,\n        typeof OrbitControls\n      >;\n    }\n  }\n}\n\nextend({ OrbitControls });\n\nconst Controls: (props: any) => JSX.Element = (props) => {\n  const { camera, gl, invalidate } = useThree();\n  const ref = useRef<OrbitControls | undefined>(undefined);\n\n  useEffect(() => {\n    ref.current?.update();\n    ref.current?.addEventListener('change', invalidate);\n  });\n\n  return <orbitControls ref={ref} args={[camera, gl.domElement]} {...props} />;\n};\n\nexport default Controls;\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t\t// no-op\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly() {\n\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t\t// no-op\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchEnd();\n\n\t\t\t} else {\n\n\t\t\t\tonMouseUp( event );\n\n\t\t\t}\n\n\t\t\tremovePointer( event );\n\n\t\t\t//\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseUp( event ) {\n\n\t\t\thandleMouseUp( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchEnd( event ) {\n\n\t\t\thandleTouchEnd( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\t\tthis.touches.ONE = TOUCH.PAN;\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n\t}\n\n}\n\nexport { OrbitControls, MapControls };\n"],"sourceRoot":""}