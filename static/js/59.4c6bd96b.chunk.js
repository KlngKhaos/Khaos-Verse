(this["webpackJsonpkhaos-frontend"]=this["webpackJsonpkhaos-frontend"]||[]).push([[59],{1785:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(10),c=n(4),s=n(9),i=n(8),u=n(1),l=n(6),d=n(85),b=n(14),j=n(998),h=n(1075),f=n(995),p=n(1019),O=n(1077),g=n(0);Object(j.b)({OrbitControls:O.a});var m,x,v,S,k,w,y,N,C,I,_,B=function(e){var t=Object(j.e)(),n=t.camera,r=t.gl,a=t.invalidate,o=Object(u.useRef)(void 0);return Object(u.useEffect)((function(){var e,t;null===(e=o.current)||void 0===e||e.update(),null===(t=o.current)||void 0===t||t.addEventListener("change",a)})),Object(g.jsx)("orbitControls",Object(c.a)({ref:o,args:[n,r.domElement]},e))},H=n(1111),z=n(1279),P=n(988),G=l.e.div(m||(m=Object(i.a)(["\n  width: 100%;\n  height: 100%;\n  text-align: center;\n"]))),M=l.e.div(x||(x=Object(i.a)(["\n  height: calc(100vh - 80px);\n  position: relative;\n"]))),J=l.e.button(v||(v=Object(i.a)(["\n  position: absolute;\n  background: url(/images/battles/blue.png);\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: unset;\n  border: unset;\n  width: 170px;\n  height: 39px;\n  color: white;\n  top: 50%;\n  left: 10%;\n  font-size: 20px;\n\n  @media (min-width: 320px) and (max-width: 480px) {\n    width: 100px;\n    height: 22px;\n    font-size: 14px;\n  }\n\n  &:hover {\n    opacity: 0.8;\n    cursor: pointer;\n  }\n"]))),T=l.e.div(S||(S=Object(i.a)(["\n  position: absolute;\n  transform: translate3d(-50%, 0, 0);\n  left: 50%;\n  bottom: 0;\n  width: 30vw;\n  height: 7vw;\n  background-color: #112233c7;\n  margin-left: auto;\n  margin-right: auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 0.5vw;\n  border-top-left-radius: 0.5vw;\n  border-top-right-radius: 0.5vw;\n"]))),A=l.e.div(k||(k=Object(i.a)(["\n  color: white;\n  font-size: 25px;\n"]))),F=l.e.div(w||(w=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n"]))),D=l.e.button(y||(y=Object(i.a)(["\n  background: url(/images/battles/blue.png);\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center center;\n  outline: unset;\n  border: unset;\n  width: 9vw;\n  height: 3vw;\n  padding: 5px 0px;\n  color: rgb(85, 34, 22);\n  font-size: 20px;\n  color: white;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  &:hover {\n    opacity: 0.8;\n    cursor: pointer;\n  }\n"]))),E=function(e){e.setColor,e.curName;var t=e.setCurName,n=e.curSpeed,r=e.curBack,a=e.colors,o=(e.nftHash,Object(u.useState)([])),i=Object(s.a)(o,2),l=i[0],b=i[1],O=Object(u.useState)([]),m=Object(s.a)(O,2),x=m[0],v=m[1],S=Object(u.useState)(0),k=Object(s.a)(S,2),w=k[0],y=k[1],N=Object(P.a)((function(e){return e.currentStatics})),C=Object(P.a)((function(e){return e.currentHoverModel})),I=Object(d.g)(),_=Object(P.a)((function(e){return e})).usersGladiators;if(Object(u.useEffect)((function(){_&&b(_)}),[_]),l&&l.length>0&&!x.length){for(var E=0;E<l.length;E++)l[E].model=Object(j.d)(h.a,l[E].glTFPath);v(l)}var L=function(){var e=Object(j.d)(f.TextureLoader,"/images/gallery/".concat(r||"arena1",".jpg"));return Object(g.jsxs)("mesh",{children:[Object(g.jsx)("sphereBufferGeometry",{attach:"geometry",args:[50,100,100]}),Object(g.jsx)("meshBasicMaterial",{attach:"material",map:e,side:f.BackSide})]})},R=function(){var e=Object(j.d)(f.TextureLoader,"/images/gallery/textures/1.jpg");return e.wrapS=f.RepeatWrapping,e.wrapT=f.RepeatWrapping,e.repeat.set(64,64),e.anisotropy=16,Object(g.jsxs)("mesh",{receiveShadow:!0,rotation:[Math.PI/2,0,0],position:[0,-4,0],children:[Object(g.jsx)("planeBufferGeometry",{attach:"geometry",args:[500,500]}),Object(g.jsx)("meshPhongMaterial",{attach:"material",map:e,side:f.DoubleSide})]})},U=function(){return x.slice(3*w,3*w+3)},W=function(){return Object(g.jsxs)("div",{children:[!(w<=0)&&Object(g.jsx)(J,{onClick:function(){w<=0||y((function(e){return e-1}))},children:"Previous"}),!(w>=Math.ceil(x.length/3)-1)&&Object(g.jsx)(J,{onClick:function(){w>=Math.ceil(x.length/3)-1||y((function(e){return e+1}))},style:{left:"unset",right:"10%"},children:"Next"})]})},K=function(){return Object(g.jsxs)(T,{children:[Object(g.jsx)(A,{children:C?C.name:(null===N||void 0===N?void 0:N.name)?N.name:"None selected"}),Object(g.jsxs)(F,{children:[Object(g.jsx)(D,{onClick:function(){(null===N||void 0===N?void 0:N.name)&&I.push({pathname:"/battles/join",state:{nft:N}})},children:"Go to Battle"}),Object(g.jsx)(D,{children:"Statistics"}),Object(g.jsx)(D,{children:"Sell"})]})]})};return Object(g.jsx)(G,{children:Object(g.jsxs)(M,{children:[Object(g.jsxs)(j.a,{camera:{fov:p.c.fov,position:p.c.position},shadows:!0,children:[Object(g.jsx)("fog",{attach:"fog",args:["white",90,150]}),Object(g.jsx)("ambientLight",{intensity:p.b.intensity}),Object(g.jsx)("pointLight",{position:p.e.position,castShadow:!0,decay:p.e.decay,"shadow-mapSize-height":p.e.shadowMapSize,"shadow-mapSize-width":p.e.shadowMapSize}),Object(g.jsx)(B,{maxPolarAngle:Math.PI/2,minPolarAngle:p.d.minPolarAngle,maxDistance:p.d.maxDistance,minDistance:p.d.minDistance,target:p.d.target,enableKeys:!0}),Object(g.jsx)(L,{}),Object(g.jsx)(R,{}),Object(g.jsx)(u.Suspense,{fallback:Object(g.jsx)(z.a,{}),children:U().map((function(e,r){return Object(g.jsx)(H.a,{data:{setModel:function(){return!0},setColor:function(){return!0},setCurName:t,curSpeed:n,animations:e.model.animations,nodes:e.model.nodes,colors:e.colors?e.colors:a,nft:e,position:Object(c.a)(Object(c.a)({},e.glTFPosition),{},{z:e.glTFPosition.z+6*r-2*U().length})}},e.name+r)}))})]}),Object(g.jsx)(W,{}),Object(g.jsx)(K,{})]})})},L=n(1350),R=n(1351),U=n(1280),W=n(48),K=n(50),q=n(77),Q=(l.e.div(N||(N=Object(i.a)(["\n  border-bottom: 2px solid ",";\n  margin-bottom: 24px;\n  padding-bottom: 32px;\n"])),(function(e){return e.theme.colors.textSubtle})),l.e.div(C||(C=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  overflow: hidden;\n"])))),V=l.e.div(I||(I=Object(i.a)(["\n  text-align: center;\n"]))),X=l.e.div(_||(_=Object(i.a)(["\n  flex: none;\n  overflow: hidden;\n  transition: width 200ms ease-in-out;\n  width: ",";\n  position: absolute;\n  right: 0;\n"])),(function(e){return e.isStaticsPaneOpen?"384px":0}));t.default=function(){var e=Object(d.h)(),t=Object(W.m)(),n=Object(d.i)().id,r=Object(K.c)().account,i=(Object(b.b)().t,Object(u.useState)(localStorage.getItem("con_curColor")?localStorage.getItem("con_curColor"):"#ffffff")),l=Object(s.a)(i,2),j=l[0],h=l[1],f=Object(u.useState)(localStorage.getItem("con_curName")?localStorage.getItem("con_curName"):"None selected."),p=Object(s.a)(f,2),O=p[0],m=p[1],x=Object(u.useState)(localStorage.getItem("con_curSpeed")?localStorage.getItem("con_curSpeed"):1),v=Object(s.a)(x,2),S=v[0],k=(v[1],Object(u.useState)(localStorage.getItem("con_curBack")?localStorage.getItem("con_curBack"):0)),w=Object(s.a)(k,2),y=(w[0],w[1],Object(u.useState)({})),N=Object(s.a)(y,2),C=N[0],I=N[1],_=Object(P.a)((function(e){return e.showStatics})),B=function(e){h(e),localStorage.setItem("con_curColor",e);var t=Object(c.a)({},C);t[O]=e,I(t),localStorage.setItem("con_colors",JSON.stringify(C))},H=function(e){m(e),h(C[e]?C[e]:"#ffffff"),localStorage.setItem("con_curName",e)},z=Object(P.a)((function(e){return e})),G=z.nftHashes,M=z.settingNFTHashes,J=(z.userNftHashes,z.settingUserNFTHashes),T=(z.schoolNftHashes,z.settingSchoolNFTHashes),A=z.myGladiators,F=z.setMyGladiators,D=z.usersGladiators,Y=z.setUsersGladiators,Z=z.schoolGladiators,$=z.setSchoolGladiators,ee=function(){var e=Object(o.a)(a.a.mark((function e(){var n,o,s,i,u,l,d,b,j,h,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=[],o=[],s=[],e.next=6,t.getUserGladiator(r);case 6:if((i=e.sent).length===G.length){e.next=19;break}u=0;case 9:if(!(u<i.length)){e.next=19;break}return e.next=12,t.userInfo(r,i[u]._hex.toString());case 12:l=e.sent,n.push(parseInt(i[u]._hex,16)),"user"===l.spot&&o.push(parseInt(i[u]._hex,16)),"school"===l.spot&&s.push(parseInt(i[u]._hex,16));case 16:u++,e.next=9;break;case 19:if(M(n),J(o),T(s),A){e.next=28;break}return e.next=25,Object(q.A)(JSON.stringify(n));case 25:d=e.sent,b=d.map((function(e){var t=e.ipfsJson.nft;return Object(c.a)(Object(c.a)({},t),{},{tokenId:e.tokenId})})),F(b);case 28:if(D){e.next=34;break}return e.next=31,Object(q.A)(JSON.stringify(o));case 31:j=e.sent,h=j.map((function(e){var t=e.ipfsJson.nft;return Object(c.a)(Object(c.a)({},t),{},{tokenId:e.tokenId})})),Y(h);case 34:if(Z){e.next=40;break}return e.next=37,Object(q.A)(JSON.stringify(s));case 37:f=e.sent,p=f.map((function(e){var t=e.ipfsJson.nft;return Object(c.a)(Object(c.a)({},t),{},{tokenId:e.tokenId})})),$(p);case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(0),console.log("errrrrrrrrrrrrrooooooooooooorrrrrrrrrrrrrrrr",e.t0);case 45:case"end":return e.stop()}}),e,null,[[0,42]])})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){ee()}),[]),Object(g.jsx)(V,{children:Object(g.jsxs)(Q,{children:["/mygladiators"===e.pathname&&Object(g.jsx)(L.a,{curColor:j,setColor:function(e){return B(e)},curName:O,setCurName:function(e){return H(e)},curSpeed:S,curBack:n,colors:C,nftHash:G||[]}),"/school"===e.pathname&&Object(g.jsx)(R.a,{curColor:j,setColor:function(e){return B(e)},curName:O,setCurName:function(e){return H(e)},curSpeed:S,curBack:n,colors:C,nftHash:G||[]}),"/tour/arena1"===e.pathname&&Object(g.jsx)(E,{curColor:j,setColor:function(e){return B(e)},curName:O,setCurName:function(e){return H(e)},curSpeed:S,curBack:n,colors:C,nftHash:G||[]}),"/tour/arena2"===e.pathname&&Object(g.jsx)(E,{curColor:j,setColor:function(e){return B(e)},curName:O,setCurName:function(e){return H(e)},curSpeed:S,curBack:n,colors:C,nftHash:G||[]}),"/tour/arena3"===e.pathname&&Object(g.jsx)(E,{curColor:j,setColor:function(e){return B(e)},curName:O,setCurName:function(e){return H(e)},curSpeed:S,curBack:n,colors:C,nftHash:G||[]}),Object(g.jsx)(X,{isStaticsPaneOpen:_,children:Object(g.jsx)(U.a,{})})]})})}}}]);
//# sourceMappingURL=59.4c6bd96b.chunk.js.map